<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="ä»‹ç»å‡ ç§åŸºæœ¬çš„çº¹ç†ä½¿ç”¨æ–¹æ³•"><title>Shaderå…¥é—¨ç²¾è¦-åŸºç¡€çº¹ç†</title><link rel=canonical href=https://yantree.github.io/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/><link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="Shaderå…¥é—¨ç²¾è¦-åŸºç¡€çº¹ç†"><meta property="og:description" content="ä»‹ç»å‡ ç§åŸºæœ¬çš„çº¹ç†ä½¿ç”¨æ–¹æ³•"><meta property="og:url" content="https://yantree.github.io/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/"><meta property="og:site_name" content="YanTree"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Shaderå…¥é—¨ç²¾è¦"><meta property="article:published_time" content="2021-05-31T16:00:26+08:00"><meta property="article:modified_time" content="2021-05-31T16:00:26+08:00"><meta property="og:image" content="https://yantree.github.io/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/topimg.png"><meta name=twitter:title content="Shaderå…¥é—¨ç²¾è¦-åŸºç¡€çº¹ç†"><meta name=twitter:description content="ä»‹ç»å‡ ç§åŸºæœ¬çš„çº¹ç†ä½¿ç”¨æ–¹æ³•"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://yantree.github.io/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/topimg.png"><link rel="shortcut icon" href=img/favicon.ico></head><body><script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"auto")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.body.dataset.scheme='dark':document.body.dataset.scheme='light'})()</script><div class="container main-container flex on-phone--column extended article-page with-toolbar"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header class=site-info><figure class=site-avatar><img src=/img/avatar_hud8215445c04336af6f3d5658bab85db7_7222_300x0_resize_box_2.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
<span class=emoji>ğŸ¥</span></figure><h1 class=site-name><a href=https://yantree.github.io/>YanTree</a></h1><h2 class=site-description>å­éè¶ï¼Œäº¦éå‘¨</h2></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></ol></aside><main class="main full-width"><div id=article-toolbar><a href=https://yantree.github.io/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>Back</span></a></div><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/><img src=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/topimg_hub743dc7ee0e867207b7b55e10230ffbf_426847_800x0_resize_box_2.png srcset="/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/topimg_hub743dc7ee0e867207b7b55e10230ffbf_426847_800x0_resize_box_2.png 800w, /p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/topimg_hub743dc7ee0e867207b7b55e10230ffbf_426847_1600x0_resize_box_2.png 1600w" width=800 height=451 loading=lazy alt="Featured image of post Shaderå…¥é—¨ç²¾è¦-åŸºç¡€çº¹ç†"></a></div><div class=article-details><header class=article-category><a href=/categories/%E6%B8%B2%E6%9F%93/>æ¸²æŸ“</a></header><h2 class=article-title><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/>Shaderå…¥é—¨ç²¾è¦-åŸºç¡€çº¹ç†</a></h2><h3 class=article-subtitle>ä»‹ç»å‡ ç§åŸºæœ¬çš„çº¹ç†ä½¿ç”¨æ–¹æ³•</h3><footer class=article-time><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--published>May 31, 2021</time></footer></div></header><section class=article-content><h1 id=æŠ€æœ¯ç¾æœ¯åŸºç¡€çº¹ç†>æŠ€æœ¯ç¾æœ¯â€”â€”åŸºç¡€çº¹ç†</h1><h2 id=å¸¸è§„çº¹ç†>å¸¸è§„çº¹ç†</h2><p>çº¹ç†çš„ä¸€ç§ä½¿ç”¨æ–¹å¼å°±æ˜¯ä½œä¸ºå¸¸è§„çº¹ç†ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€å¼ ç…§ç‰‡ã€‚åœ¨è¿™é‡Œçº¹ç†çš„ä½œç”¨æ˜¯ä»£æ›¿ <strong>ç‰©ä½“çš„æ¼«åå°„ç³»æ•°</strong> ï¼Œè¿™é‡Œæˆ‘ä»¬ä¼šå†ä¹‹å‰çš„ Blinn-Phong é«˜å…‰åå°„ shader çš„åŸºç¡€ä¸Šå®ç°ä¸€ä¸ªåŸºç¡€çš„çº¹ç† shaderã€‚è¿™é‡Œå¯ä»¥çŸ¥é“å¸¸è§„çº¹ç†ä¼šå‚ä¸ <strong>ç¯å¢ƒå…‰</strong> ï¼Œç‰©ä½“ <strong>æ¼«åå°„</strong> çš„è®¡ç®—ã€‚åœ¨åŸºæœ¬å…‰ç…§æ¨¡å‹ä¸­ï¼Œç”±äºæ²¡æœ‰ç›¸å…³æè´¨è´´å›¾ï¼Œæ‰€ä»¥åœ¨è®¡ç®—å…¬å¼ä¸­</p><blockquote><p>C = (c * m) * max(0 , n * l )</p></blockquote><p><strong>m</strong> çš„å€¼å–ä¸º 1ï¼Œä¸ä¼šå½±å“åˆ°æ¼«åå°„å…‰çš„è®¡ç®—ã€‚å½“ <strong>m</strong> å€¼å­˜åœ¨æ—¶ï¼Œä¹Ÿå°±æ˜¯æœ‰å¸¸è§„çº¹ç†çš„æ—¶å€™ï¼Œå…‰ç…§è®¡ç®—ä¸­çš„ <strong>m</strong> å°±è¦ä»å¸¸è§„çº¹ç†å›¾ä¸­è¯»å–ï¼Œè¯»å–æ–¹æ³•è§ä¸‹é¢ albedo çš„è®¡ç®—æ–¹æ³•ã€‚</p><div class=highlight><pre class=chroma><code class=language-glsl data-lang=glsl><span class=n>Shader</span> <span class=err>&#34;</span><span class=n>Unlit</span><span class=o>/</span><span class=n>MainTex0</span><span class=err>&#34;</span>
<span class=p>{</span>
    <span class=n>Properties</span>
    <span class=p>{</span>
        <span class=n>_MainTex</span> <span class=p>(</span><span class=err>&#34;</span><span class=n>Texture</span><span class=err>&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=err>&#34;</span><span class=n>white</span><span class=err>&#34;</span> <span class=p>{}</span>
        <span class=n>_Color</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Color</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>_SpecularCol</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Specular</span> <span class=n>Col</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>_SpecularStrength</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Specular</span> <span class=n>Strength</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Range</span><span class=p>(</span><span class=mf>8.0</span><span class=p>,</span> <span class=mi>256</span><span class=p>))</span><span class=o>=</span><span class=mi>10</span>
        
    <span class=p>}</span>
    <span class=n>SubShader</span>
    <span class=p>{</span>
        <span class=n>Tags</span> <span class=p>{</span> <span class=err>&#34;</span><span class=n>RenderType</span><span class=err>&#34;</span><span class=o>=</span><span class=err>&#34;</span><span class=n>Opaque</span><span class=err>&#34;</span> <span class=err>&#34;</span><span class=n>LightMode</span><span class=err>&#34;</span><span class=o>=</span><span class=err>&#34;</span><span class=n>ForwardBase</span><span class=err>&#34;</span> <span class=p>}</span>
        <span class=n>LOD</span> <span class=mi>100</span>

        <span class=n>Pass</span>
        <span class=p>{</span>
            <span class=n>CGPROGRAM</span>
            <span class=err>#</span><span class=n>pragma</span> <span class=n>vertex</span> <span class=n>vert</span>
            <span class=err>#</span><span class=n>pragma</span> <span class=n>fragment</span> <span class=n>frag</span>

            <span class=err>#</span><span class=n>include</span> <span class=err>&#34;</span><span class=n>UnityCG</span><span class=p>.</span><span class=n>cginc</span><span class=err>&#34;</span>
            <span class=err>#</span><span class=n>include</span> <span class=err>&#34;</span><span class=n>Lighting</span><span class=p>.</span><span class=n>cginc</span><span class=err>&#34;</span>

            <span class=k>sampler2D</span> <span class=n>_MainTex</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_MainTex_ST</span><span class=p>;</span>
            <span class=n>half4</span> <span class=n>_Color</span><span class=p>;</span>
            <span class=n>half4</span> <span class=n>_SpecularCol</span><span class=p>;</span>
            <span class=k>float</span> <span class=n>_SpecularStrength</span><span class=p>;</span>

            <span class=k>struct</span> <span class=n>appdata</span>
            <span class=p>{</span>
                <span class=n>float4</span> <span class=n>vertex</span> <span class=o>:</span> <span class=n>POSITION</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>normal</span> <span class=o>:</span> <span class=n>NORMAL</span><span class=p>;</span>
                <span class=n>float2</span> <span class=n>texcoord</span> <span class=o>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
            <span class=p>};</span>

            <span class=k>struct</span> <span class=n>v2f</span>
            <span class=p>{</span>
                <span class=n>float4</span> <span class=n>posWorld</span> <span class=o>:</span> <span class=n>SV_POSITION</span><span class=p>;</span>
                <span class=n>float2</span> <span class=n>uv</span> <span class=o>:</span> <span class=n>TEXCOORD1</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>worldNormal</span> <span class=o>:</span> <span class=n>NORMAL</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>worldPos</span> <span class=o>:</span> <span class=n>TEXCOORD2</span><span class=p>;</span>

            <span class=p>};</span>

            <span class=n>v2f</span> <span class=n>vert</span> <span class=p>(</span><span class=n>appdata</span> <span class=n>v</span><span class=p>)</span>
            <span class=p>{</span>
                <span class=n>v2f</span> <span class=n>o</span><span class=p>;</span>
                <span class=n>o</span><span class=p>.</span><span class=n>posWorld</span> <span class=o>=</span> <span class=n>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span>     <span class=c1>// é¡¶ç‚¹ä½ç½®ä»æ¨¡å‹ç©ºé—´è½¬åˆ°è£å‰ªç©ºé—´</span>
                <span class=n>o</span><span class=p>.</span><span class=n>worldNormal</span> <span class=o>=</span> <span class=n>UnityObjectToWorldDir</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>normal</span><span class=p>);</span> <span class=c1>// é¡¶ç‚¹æ³•çº¿ä»æ¨¡å‹ç©ºé—´è½¬åˆ°ä¸–ç•Œç©ºé—´</span>
                <span class=n>o</span><span class=p>.</span><span class=n>worldPos</span> <span class=o>=</span> <span class=n>UnityObjectToWorldDir</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span>    <span class=c1>// é¡¶ç‚¹ä»æ¨¡å‹ç©ºé—´è½¬åˆ°ä¸–ç•Œç©ºé—´</span>
                <span class=n>o</span><span class=p>.</span><span class=n>uv</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>texcoord</span><span class=p>.</span><span class=n>xy</span> <span class=o>*</span> <span class=n>_MainTex_ST</span><span class=p>.</span><span class=n>xy</span> <span class=o>+</span> <span class=n>_MainTex_ST</span><span class=p>.</span><span class=n>zw</span><span class=p>;</span> <span class=c1>// ä½¿ç”¨çº¹ç†å±æ€§çš„_STå¯¹é¡¶ç‚¹çº¹ç†åæ ‡è¿›è¡Œå˜æ¢</span>
                <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=n>fixed4</span> <span class=n>frag</span> <span class=p>(</span><span class=n>v2f</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>SV_Target</span>
            <span class=p>{</span>
                <span class=n>half3</span> <span class=n>worldNormal</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>worldNormal</span><span class=p>);</span> <span class=c1>// é¡¶ç‚¹æ³•çº¿æ–¹å‘</span>
                <span class=n>half3</span> <span class=n>worldLightDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>_WorldSpaceLightPos0</span><span class=p>.</span><span class=n>xyz</span><span class=p>);</span> <span class=c1>// ä¸»å…‰æºæ”¾æ–¹å‘</span>
                <span class=n>half3</span> <span class=n>viewDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>_WorldSpaceCameraPos</span><span class=p>.</span><span class=n>xyz</span> <span class=o>-</span> <span class=n>i</span><span class=p>.</span><span class=n>worldPos</span><span class=p>);</span> <span class=c1>// è§†è§’æ–¹å‘</span>
                <span class=n>half3</span> <span class=n>halfDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>viewDir</span> <span class=o>+</span> <span class=n>worldLightDir</span><span class=p>);</span> <span class=c1>// åŠè§’æ–¹å‘</span>

                <span class=n>half3</span> <span class=n>NdotL</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>worldNormal</span><span class=p>,</span> <span class=n>worldLightDir</span><span class=p>));</span> <span class=c1>// Lambert</span>
                <span class=n>half3</span> <span class=n>NdotV</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>worldNormal</span><span class=p>,</span> <span class=n>halfDir</span><span class=p>));</span>       <span class=c1>// BlinnPhong</span>

                <span class=n>half3</span> <span class=n>albedo</span> <span class=o>=</span> <span class=n>tex2D</span><span class=p>(</span><span class=n>_MainTex</span><span class=p>,</span><span class=n>i</span><span class=p>.</span><span class=n>uv</span><span class=p>).</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>_Color</span><span class=p>.</span><span class=n>rgb</span><span class=p>;</span>    <span class=c1>// æ¼«åå°„ç³»æ•°ï¼Œä»çº¹ç†é‡‡æ ·æ¼«åå°„é¢œè‰²ä½œä¸ºå…¶å€¼</span>
                <span class=n>half3</span> <span class=n>ambient</span> <span class=o>=</span> <span class=n>UNITY_LIGHTMODEL_AMBIENT</span><span class=p>.</span><span class=n>xyz</span> <span class=o>*</span> <span class=n>albedo</span><span class=p>;</span>   <span class=c1>// ç¯å¢ƒå…‰</span>

                <span class=c1>// æ¼«åå°„å…‰ = å…¥å°„å…‰çº¿å¼ºåº¦ * æè´¨çš„æ¼«åå°„ç³»æ•° * å–å€¼ä¸ºæ­£æ•°(è¡¨é¢æ³•çº¿æ–¹å‘ Â· å…‰æºæ–¹å‘)</span>
                <span class=n>half3</span> <span class=n>diffuse</span> <span class=o>=</span> <span class=n>_LightColor0</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>albedo</span> <span class=o>*</span> <span class=n>pow</span><span class=p>(</span><span class=n>NdotL</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>+</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>);</span> <span class=c1>// half lambert</span>
                <span class=n>half3</span> <span class=n>specular</span> <span class=o>=</span> <span class=n>_LightColor0</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>_SpecularCol</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>pow</span><span class=p>(</span><span class=n>NdotV</span><span class=p>,</span> <span class=n>_SpecularStrength</span><span class=p>);</span> <span class=c1>// blinn phong</span>
             
                <span class=k>return</span> <span class=n>fixed4</span><span class=p>(</span><span class=n>diffuse</span> <span class=o>+</span> <span class=n>specular</span> <span class=o>+</span> <span class=n>ambient</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
            <span class=p>}</span>
            <span class=n>ENDCG</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><h2 id=å‡¹å‡¸æ˜ å°„>å‡¹å‡¸æ˜ å°„</h2><p>å‡¹å‡¸æ˜ å°„çš„ä½œç”¨å°±æ˜¯ä½¿ç”¨ä¸€å¼ çº¹ç†æ¥ä¿®æ”¹æ¨¡å‹è¡¨é¢çš„æ³•çº¿ï¼Œæä¾›æ›´å¤šçš„ç»†èŠ‚æ•ˆæœã€‚ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><ol><li><p>é«˜åº¦æ˜ å°„</p><p>ä¸€å¼ é«˜åº¦çº¹ç†æ¥æ¨¡æ‹Ÿè¡¨é¢ä½ç§»ï¼Œç„¶åå¾—åˆ°ä¸€ä¸ªä¿®æ”¹åçš„æ³•çº¿å€¼ã€‚</p></li><li><p>æ³•çº¿æ˜ å°„</p><p>ä¸€å¼ æ³•çº¿çº¹ç†æ¥ç›´æ¥å­˜å‚¨è¡¨é¢æ³•çº¿ã€‚</p></li></ol><p>é€šå¸¸æˆ‘ä»¬å°†é«˜åº¦æ˜ å°„å’Œæ³•çº¿æ˜ å°„å½“æˆä¸€ç§æŠ€æœ¯ï¼Œä½†æ˜¯ä¸¤è€…çš„æœ¬è´¨æ˜¯æœ‰æ‰€åŒºåˆ«çš„ã€‚</p><h3 id=æ³•çº¿çº¹ç†>æ³•çº¿çº¹ç†</h3><p>æ³•çº¿çº¹ç†ä¸­å­˜å‚¨çš„æ˜¯è¡¨é¢çš„æ³•çº¿æ–¹å‘ï¼Œç”±äºå‘ç°åˆ†é‡çš„å–å€¼èŒƒå›´åœ¨ [-1, 1] ä¹‹é—´ï¼Œè€Œåƒç´ çš„åˆ†é‡èŒƒå›´åœ¨ [0, 1] ï¼Œå› æ­¤ä¸¤è€…çš„è½¬æ¢è¿˜éœ€è¦åšä¸€ä¸ªæ˜ å°„ï¼š</p><blockquote><p>pixel = (normal + 1) / 2</p></blockquote><p>åæ˜ å°„åå°±èƒ½å¾—åˆ°åŸå…ˆçš„æ³•çº¿æ–¹å‘</p><blockquote><p>normal = pixel * 2 - 1</p></blockquote><h4 id=æ³•çº¿çš„åæ ‡ç©ºé—´>æ³•çº¿çš„åæ ‡ç©ºé—´</h4><ol><li><p>æ¨¡å‹ç©ºé—´çš„æ³•çº¿çº¹ç†</p><p>æ¨¡å‹é¡¶ç‚¹çš„æ³•çº¿å®šä¹‰åœ¨æ¨¡å‹ç©ºé—´ä¸­ï¼Œä¸€ç§ç›´æ¥çš„æƒ³æ³•å°±æ˜¯å°†ä¿®æ”¹åçš„æ¨¡å‹ç©ºé—´ä¸­çš„è¡¨é¢æ³•çº¿å­˜å‚¨åœ¨ä¸€å¼ çº¹ç†ä¸­ï¼Œè¿™ç§çº¹ç†è¢«ç§°ä¹‹ä¸º <strong>æ¨¡å‹ç©ºé—´çš„æ³•çº¿çº¹ç†</strong>ã€‚</p></li><li><p>åˆ‡çº¿ç©ºé—´çš„æ³•çº¿çº¹ç†</p><p>å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨æ¨¡å‹é¡¶ç‚¹çš„ <strong>åˆ‡çº¿ç©ºé—´</strong> å­˜å‚¨æ³•çº¿ã€‚å¯¹äºæ¨¡å‹çš„æ¯ä¸ªé¡¶ç‚¹ï¼Œéƒ½æœ‰å±äºè‡ªå·±çš„åˆ‡çº¿ç©ºé—´ï¼Œæ¨¡å‹çš„é¡¶ç‚¹å°±æ˜¯åˆ‡çº¿ç©ºé—´çš„åŸç‚¹ï¼Œé¡¶ç‚¹çš„æ³•çº¿ä½œåˆ‡çº¿ç©ºé—´çš„ z è½´ (n)ï¼Œé¡¶ç‚¹çš„åˆ‡çº¿æ–¹å‘ä½œ x è½´ (t)ï¼Œé¡¶ç‚¹çš„ y è½´å¯ç”± xã€z å‰ä¹˜æ±‚å¾—ï¼Œä¹Ÿè¢«ç§°ä¸º <strong>å‰¯åˆ‡çº¿</strong> æˆ– <strong>å‰¯æ³•çº¿</strong> (b)ï¼Œè¿™å°±æ˜¯ <strong>åˆ‡çº¿ç©ºé—´çš„æ³•çº¿çº¹ç†</strong>ã€‚</p></li></ol><h4 id=è®¡ç®—æ–¹å¼>è®¡ç®—æ–¹å¼</h4><p>ç”±äºæ³•çº¿çº¹ç†ä¸­å­˜å‚¨çš„æ˜¯åˆ‡çº¿ç©ºé—´ä¸‹çš„æ–¹å‘ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸æœ‰ä¸¤ç§é€‰æ‹©ï¼š</p><ol><li>åœ¨åˆ‡çº¿ç©ºé—´ä¸‹è¿›è¡Œå…‰ç…§è®¡ç®—ï¼Œéœ€è¦å°†å…‰ç…§æ–¹å‘ã€è§†è§’æ–¹å‘å˜æ¢åˆ°åˆ‡çº¿ç©ºé—´ä¸‹ã€‚</li><li>åœ¨ä¸–ç•Œç©ºé—´ä¸‹è¿›è¡Œå…‰ç…§è®¡ç®—ï¼Œéœ€è¦æŠŠé‡‡æ ·å¾—åˆ°çš„æ³•çº¿æ–¹å‘å˜æ¢åˆ°ä¸–ç•Œç©ºé—´ä¸‹ï¼Œå†å’Œä¸–ç•Œç©ºé—´ä¸‹çš„å…‰ç…§æ–¹å‘å’Œè§†è§’æ–¹å‘è¿›è¡Œè®¡ç®—ã€‚</li></ol><p>æ•ˆç‡ä¸Šè€ƒè™‘ï¼Œç¬¬ä¸€ç§ä¼˜äºç¬¬äºŒç§ï¼Œå› ä¸ºæ•´ä¸ªç©ºé—´çš„å˜æ¢è¿‡ç¨‹åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­å®Œæˆã€‚</p><p>é€šç”¨æ€§è€ƒè™‘ï¼Œç¬¬äºŒç§ä¼˜äºç¬¬ä¸€ç§ï¼Œå› ä¸ºæœ‰æ—¶éœ€è¦åœ¨ä¸–ç•Œç©ºé—´è¿›è¡Œä¸€æ¬¡çŸ©é˜µæ“ä½œã€‚</p><h5 id=åˆ‡çº¿ç©ºé—´è®¡ç®—>åˆ‡çº¿ç©ºé—´è®¡ç®—</h5><p>æ€è·¯ï¼š1. åœ¨é¡¶ç‚¹ç€è‰²å™¨é‡Œå°†æ¨¡å‹ç©ºé—´ä¸‹çš„å…‰æºæ–¹å‘ã€è§†è§’æ–¹å‘è½¬åˆ°åˆ‡çº¿ç©ºé—´ï¼›2. åœ¨ç‰‡å…ƒç€è‰²å™¨é‡Œç›´æ¥å¯¹æ³•çº¿çº¹ç†è¿›è¡Œé‡‡æ ·ï¼Œå¾—åˆ°åˆ‡çº¿ç©ºé—´ä¸‹çš„æ³•çº¿æ•°å€¼ï¼›3. è¿›è¡Œå…‰ç…§è®¡ç®—ã€‚</p><div class=highlight><pre class=chroma><code class=language-glsl data-lang=glsl><span class=n>Shader</span> <span class=err>&#34;</span><span class=n>Unlit</span><span class=o>/</span><span class=n>MainBumpT</span><span class=err>&#34;</span>
<span class=p>{</span>
    <span class=n>Properties</span>
    <span class=p>{</span>
        <span class=n>_MainTex</span> <span class=p>(</span><span class=err>&#34;</span><span class=n>MainTex</span><span class=err>&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=err>&#34;</span><span class=n>white</span><span class=err>&#34;</span> <span class=p>{}</span>
        <span class=n>_BumpTex</span><span class=p>(</span><span class=err>&#34;</span><span class=n>BumpTex</span><span class=err>&#34;</span><span class=p>,</span><span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=err>&#34;</span><span class=n>white</span><span class=err>&#34;</span> <span class=p>{}</span>
        <span class=n>_BumpStrength</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Bump</span> <span class=n>Strength</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Float</span><span class=p>)</span> <span class=o>=</span> <span class=mf>1.0</span>
        <span class=n>_Color</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Color</span> <span class=n>Tint</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>_Specular</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Specular</span> <span class=n>Color</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>_SpecularStrength</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Specular</span> <span class=n>Strength</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Range</span><span class=p>(</span><span class=mf>8.0</span><span class=p>,</span> <span class=mi>256</span><span class=p>))</span> <span class=o>=</span> <span class=mi>20</span>
    <span class=p>}</span>
    <span class=n>SubShader</span>
    <span class=p>{</span>
        <span class=n>Tags</span> <span class=p>{</span> <span class=err>&#34;</span><span class=n>RenderType</span><span class=err>&#34;</span><span class=o>=</span><span class=err>&#34;</span><span class=n>Opaque</span><span class=err>&#34;</span> <span class=err>&#34;</span><span class=n>LightModel</span><span class=err>&#34;</span><span class=o>=</span><span class=err>&#34;</span><span class=n>ForwardBase</span><span class=err>&#34;</span> <span class=p>}</span>
        <span class=n>LOD</span> <span class=mi>100</span>

        <span class=n>Pass</span>
        <span class=p>{</span>
            <span class=n>CGPROGRAM</span>
            <span class=err>#</span><span class=n>pragma</span> <span class=n>vertex</span> <span class=n>vert</span>
            <span class=err>#</span><span class=n>pragma</span> <span class=n>fragment</span> <span class=n>frag</span>

            <span class=c1>//#include &#34;UnityCG.cginc&#34;</span>
            <span class=err>#</span><span class=n>include</span> <span class=err>&#34;</span><span class=n>Lighting</span><span class=p>.</span><span class=n>cginc</span><span class=err>&#34;</span>


            <span class=k>sampler2D</span> <span class=n>_MainTex</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_MainTex_ST</span><span class=p>;</span>
            <span class=k>sampler2D</span> <span class=n>_BumpTex</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_BumpTex_ST</span><span class=p>;</span>
            <span class=k>half</span> <span class=n>_BumpStrength</span><span class=p>;</span>
            <span class=n>half4</span> <span class=n>_Color</span><span class=p>;</span>
            <span class=n>half4</span> <span class=n>_Specular</span><span class=p>;</span>
            <span class=k>half</span> <span class=n>_SpecularStrength</span><span class=p>;</span>

            <span class=k>struct</span> <span class=n>appdata</span>
            <span class=p>{</span>
                <span class=n>float4</span> <span class=n>vertex</span> <span class=o>:</span> <span class=n>POSITION</span><span class=p>;</span>
                <span class=n>float4</span> <span class=n>texcoord</span> <span class=o>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
                <span class=n>float4</span> <span class=n>tangent</span> <span class=o>:</span> <span class=n>TANGENT</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>normal</span> <span class=o>:</span> <span class=n>NORMAL</span><span class=p>;</span>
            <span class=p>};</span>

            <span class=k>struct</span> <span class=n>v2f</span>
            <span class=p>{</span>
                <span class=n>float4</span> <span class=n>uv</span> <span class=o>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>  <span class=c1>// flaot4 å› ä¸ºä½¿ç”¨äº†ä¸¤å¼ çº¹ç†è´´å›¾ï¼Œæ‰€ä»¥æˆ flaot4 äº†</span>
                <span class=n>float4</span> <span class=n>posWorld</span> <span class=o>:</span> <span class=n>SV_POSITION</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>lightDir</span> <span class=o>:</span> <span class=n>TEXCOORD1</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>viewDir</span> <span class=o>:</span> <span class=n>TEXCOORD2</span><span class=p>;</span>
            <span class=p>};</span>


            <span class=n>v2f</span> <span class=n>vert</span> <span class=p>(</span><span class=n>appdata</span> <span class=n>v</span><span class=p>)</span>
            <span class=p>{</span>
                <span class=n>v2f</span> <span class=n>o</span><span class=p>;</span>
                <span class=n>o</span><span class=p>.</span><span class=n>posWorld</span> <span class=o>=</span> <span class=n>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span>      <span class=c1>// é¡¶ç‚¹åæ ‡ä»æ¨¡å‹ç©ºé—´è½¬åˆ°è£å‰ªç©ºé—´</span>

                <span class=n>o</span><span class=p>.</span><span class=n>uv</span><span class=p>.</span><span class=n>xy</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>texcoord</span><span class=p>.</span><span class=n>xy</span> <span class=o>*</span> <span class=n>_MainTex_ST</span><span class=p>.</span><span class=n>xy</span> <span class=o>+</span> <span class=n>_MainTex_ST</span><span class=p>.</span><span class=n>zw</span><span class=p>;</span> <span class=c1>// MainTex çš„ Tiling å’Œ Offset</span>
                <span class=n>o</span><span class=p>.</span><span class=n>uv</span><span class=p>.</span><span class=n>zw</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>texcoord</span><span class=p>.</span><span class=n>xy</span> <span class=o>*</span> <span class=n>_BumpTex_ST</span><span class=p>.</span><span class=n>xy</span> <span class=o>+</span> <span class=n>_BumpTex_ST</span><span class=p>.</span><span class=n>zw</span><span class=p>;</span> <span class=c1>// BumpTex çš„ Tiling å’Œ offset</span>

                <span class=n>float3</span> <span class=n>binnormal</span> <span class=o>=</span> <span class=n>cross</span><span class=p>(</span><span class=n>normalize</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>normal</span><span class=p>),</span> <span class=n>normalize</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>tangent</span><span class=p>.</span><span class=n>xyz</span><span class=p>))</span> <span class=o>*</span> <span class=n>v</span><span class=p>.</span><span class=n>tangent</span><span class=p>.</span><span class=n>w</span><span class=p>;</span> <span class=c1>// å¾—åˆ°æ¨¡å‹ç©ºé—´ä¸‹çš„å‰¯åˆ‡çº¿(.w æ˜¯å–ä¸€ä¸ªæ–¹å‘ä½œä¸ºåˆ‡çº¿æ–¹å‘)</span>
                <span class=n>float3x3</span> <span class=n>rotation</span> <span class=o>=</span> <span class=n>float3x3</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>tangent</span><span class=p>.</span><span class=n>xyz</span><span class=p>,</span> <span class=n>binnormal</span><span class=p>,</span> <span class=n>v</span><span class=p>.</span><span class=n>normal</span><span class=p>);</span>                      <span class=c1>// ä¸€ä¸ªåˆ‡çº¿ç©ºé—´ (é¡¶ç‚¹åˆ‡çº¿æ–¹å‘ä½œä¸º x,å‰ä¹˜å€¼ä½œä¸º y, é¡¶ç‚¹æ³•çº¿ä½œä¸º z)</span>

                <span class=n>o</span><span class=p>.</span><span class=n>lightDir</span> <span class=o>=</span> <span class=n>mul</span><span class=p>(</span><span class=n>rotation</span><span class=p>,</span> <span class=n>ObjSpaceLightDir</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>));</span> <span class=c1>// æ¨¡å‹ç©ºé—´ä¸‹çš„å…‰ç…§æ–¹å‘è½¬åˆ°åˆ‡çº¿ç©ºé—´</span>
                <span class=n>o</span><span class=p>.</span><span class=n>viewDir</span> <span class=o>=</span> <span class=n>mul</span><span class=p>(</span><span class=n>rotation</span><span class=p>,</span> <span class=n>ObjSpaceViewDir</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>));</span>   <span class=c1>// æ¨¡å‹ç©ºé—´ä¸‹çš„è§†è§’æ–¹å‘è½¬åˆ°åˆ‡çº¿ç©ºé—´</span>

                <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=n>fixed4</span> <span class=n>frag</span> <span class=p>(</span><span class=n>v2f</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>SV_Target</span>
            <span class=p>{</span>
                <span class=n>half3</span> <span class=n>tangentLightDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>lightDir</span><span class=p>);</span> <span class=c1>// å½’ä¸€åŒ–å…‰ç…§æ–¹å‘</span>
                <span class=n>half3</span> <span class=n>tangentViewDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>viewDir</span><span class=p>);</span>   <span class=c1>// å½’ä¸€åŒ–è§†è§’æ–¹å‘</span>
                <span class=n>half3</span> <span class=n>halfDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>tangentLightDir</span> <span class=o>+</span> <span class=n>tangentViewDir</span><span class=p>);</span> <span class=c1>// å½’ä¸€åŒ–åŠè§’æ–¹å‘</span>

                <span class=n>half4</span> <span class=n>packNormal</span> <span class=o>=</span> <span class=n>tex2D</span><span class=p>(</span><span class=n>_BumpTex</span><span class=p>,</span><span class=n>i</span><span class=p>.</span><span class=n>uv</span><span class=p>.</span><span class=n>zw</span><span class=p>);</span>    <span class=c1>// å¯¹æ³•çº¿è´´å›¾è¿›è¡Œé‡‡æ ·</span>
                <span class=n>half3</span> <span class=n>tangentNormal</span><span class=p>;</span>
                <span class=n>tangentNormal</span><span class=o>=</span><span class=n>UnpackNormal</span><span class=p>(</span><span class=n>packNormal</span><span class=p>);</span>
                <span class=n>tangentNormal</span><span class=p>.</span><span class=n>xy</span><span class=o>*=</span><span class=n>_BumpStrength</span><span class=p>;</span>               <span class=c1>// è°ƒæ•´æ³•çº¿ç¼©æ”¾ï¼Œæ§åˆ¶å‡¹å‡¸å¼ºåº¦</span>
                <span class=n>tangentNormal</span><span class=p>.</span><span class=n>z</span> <span class=o>=</span> <span class=n>sqrt</span><span class=p>(</span><span class=mf>1.0</span> <span class=o>-</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>tangentNormal</span><span class=p>.</span><span class=n>xy</span><span class=p>,</span> <span class=n>tangentNormal</span><span class=p>.</span><span class=n>xy</span><span class=p>)));</span>

                <span class=n>half3</span> <span class=n>NdotL</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>tangentNormal</span><span class=p>,</span> <span class=n>tangentLightDir</span><span class=p>));</span> <span class=c1>// lambert</span>
                <span class=n>half3</span> <span class=n>RdotL</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>tangentNormal</span><span class=p>,</span> <span class=n>halfDir</span><span class=p>));</span>         <span class=c1>// blinn phong</span>

                <span class=n>half3</span> <span class=n>albedo</span> <span class=o>=</span> <span class=n>tex2D</span><span class=p>(</span><span class=n>_MainTex</span><span class=p>,</span><span class=n>i</span><span class=p>.</span><span class=n>uv</span><span class=p>)</span> <span class=o>*</span> <span class=n>_Color</span><span class=p>.</span><span class=n>rgb</span><span class=p>;</span>      <span class=c1>// æ¼«åå°„ç³»æ•°(ä»è´´å›¾ä¸­è¯»å–)</span>
                <span class=n>half3</span> <span class=n>ambient</span> <span class=o>=</span> <span class=n>UNITY_LIGHTMODEL_AMBIENT</span><span class=p>.</span><span class=n>xyz</span> <span class=o>*</span> <span class=n>albedo</span><span class=p>;</span> <span class=c1>// ç¯å¢ƒå…‰</span>
                <span class=n>half3</span> <span class=n>diffuse</span> <span class=o>=</span> <span class=n>_LightColor0</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>albedo</span> <span class=o>*</span> <span class=n>pow</span><span class=p>(</span><span class=n>NdotL</span><span class=o>*</span><span class=mf>0.5</span> <span class=o>+</span><span class=mf>0.5</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>);</span> <span class=c1>// half lambert</span>
                <span class=n>half3</span> <span class=n>specular</span> <span class=o>=</span> <span class=n>_LightColor0</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>_Specular</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>pow</span><span class=p>(</span><span class=n>RdotL</span><span class=p>,</span> <span class=n>_SpecularStrength</span><span class=p>);</span>

                <span class=k>return</span> <span class=n>half4</span><span class=p>(</span><span class=n>ambient</span> <span class=o>+</span> <span class=n>diffuse</span> <span class=o>+</span> <span class=n>specular</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
            <span class=p>}</span>
            <span class=n>ENDCG</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>

</code></pre></div><h5 id=ä¸–ç•Œç©ºé—´è®¡ç®—>ä¸–ç•Œç©ºé—´è®¡ç®—</h5><p>æ€è·¯ï¼š1. åœ¨é¡¶ç‚¹ç€è‰²å™¨é‡Œå°†æ¨¡å‹ç©ºé—´ä¸‹çš„é¡¶ç‚¹ä½ç½®ã€é¡¶ç‚¹æ³•çº¿ã€é¡¶ç‚¹åˆ‡çº¿ã€é¡¶ç‚¹å‰¯åˆ‡çº¿è½¬åˆ°ä¸–ç•Œç©ºé—´ï¼Œå¹¶åˆ›å»ºæ³•çº¿ä»åˆ‡çº¿ç©ºé—´è½¬ä¸–ç•Œç©ºé—´çš„ <strong>çŸ©é˜µ</strong>ï¼Œç”¨äºåé¢é‡‡æ ·æ³•çº¿çº¹ç†å°†æ³•çº¿ä»åˆ‡çº¿ç©ºé—´è½¬åˆ°ä¸–ç•Œç©ºé—´ï¼›2. è®¡ç®—ä¸–ç•Œç©ºé—´ä¸‹çš„å…‰ç…§æ–¹å‘ã€è§†è§’æ–¹å‘ï¼Œå¯¹æ³•çº¿çº¹ç†è¿›è¡Œé‡‡æ ·ï¼Œå¹¶ä¸”å°†å…¶ä»åˆ‡çº¿ç©ºé—´è½¬åˆ°ä¸–ç•Œç©ºé—´ï¼›3. è¿›è¡Œå…‰ç…§è®¡ç®—ã€‚</p><div class=highlight><pre class=chroma><code class=language-glsl data-lang=glsl><span class=n>Shader</span> <span class=err>&#34;</span><span class=n>Unlit</span><span class=o>/</span><span class=n>MainBumpW</span><span class=err>&#34;</span>
<span class=p>{</span>
    <span class=n>Properties</span>
    <span class=p>{</span>
        <span class=n>_MainTex</span> <span class=p>(</span><span class=err>&#34;</span><span class=n>MainTex</span><span class=err>&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=err>&#34;</span><span class=n>white</span><span class=err>&#34;</span> <span class=p>{}</span>
        <span class=n>_BumpTex</span><span class=p>(</span><span class=err>&#34;</span><span class=n>BumpTex</span><span class=err>&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=err>&#34;</span><span class=n>white</span><span class=err>&#34;</span> <span class=p>{}</span>
        <span class=n>_BumpScale</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Bump</span> <span class=n>Scale</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Float</span><span class=p>)</span> <span class=o>=</span> <span class=mf>1.0</span>
        <span class=n>_Color</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Color</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>_Specular</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Specular</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>_SpecularPower</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Specular</span> <span class=n>Power</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Range</span><span class=p>(</span><span class=mf>8.0</span><span class=p>,</span> <span class=mi>256</span><span class=p>))</span> <span class=o>=</span> <span class=mi>20</span> 
    <span class=p>}</span>
    <span class=n>SubShader</span>
    <span class=p>{</span>
        <span class=n>Tags</span> <span class=p>{</span> <span class=err>&#34;</span><span class=n>RenderType</span><span class=err>&#34;</span><span class=o>=</span><span class=err>&#34;</span><span class=n>Opaque</span><span class=err>&#34;</span> <span class=err>&#34;</span><span class=n>LightMode</span><span class=err>&#34;</span><span class=o>=</span> <span class=err>&#34;</span><span class=n>ForwardBase</span><span class=err>&#34;</span><span class=p>}</span>

        <span class=n>Pass</span>
        <span class=p>{</span>
            <span class=n>CGPROGRAM</span>
            <span class=err>#</span><span class=n>pragma</span> <span class=n>vertex</span> <span class=n>vert</span>
            <span class=err>#</span><span class=n>pragma</span> <span class=n>fragment</span> <span class=n>frag</span>

            <span class=err>#</span><span class=n>include</span> <span class=err>&#34;</span><span class=n>UnityCG</span><span class=p>.</span><span class=n>cginc</span><span class=err>&#34;</span>
            <span class=err>#</span><span class=n>include</span> <span class=err>&#34;</span><span class=n>Lighting</span><span class=p>.</span><span class=n>cginc</span><span class=err>&#34;</span>

            <span class=k>sampler2D</span> <span class=n>_MainTex</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_MainTex_ST</span><span class=p>;</span>
            <span class=k>sampler2D</span> <span class=n>_BumpTex</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_BumpTex_ST</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_Color</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_Specular</span><span class=p>;</span>
            <span class=k>float</span> <span class=n>_BumpScale</span><span class=p>;</span>
            <span class=k>float</span> <span class=n>_SpecularPower</span><span class=p>;</span>

            <span class=k>struct</span> <span class=n>appdata</span>
            <span class=p>{</span>
                <span class=n>float4</span> <span class=n>vertex</span> <span class=o>:</span> <span class=n>POSITION</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>normal</span> <span class=o>:</span> <span class=n>NORMAL</span><span class=p>;</span>
                <span class=n>float4</span> <span class=n>tangent</span> <span class=o>:</span> <span class=n>TANGENT</span><span class=p>;</span>
                <span class=n>float4</span> <span class=n>texcoord</span> <span class=o>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
            <span class=p>};</span>

            <span class=k>struct</span> <span class=n>v2f</span>
            <span class=p>{</span>
                <span class=n>float4</span> <span class=n>uv</span> <span class=o>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
                <span class=n>float4</span> <span class=n>posWorld</span> <span class=o>:</span> <span class=n>SV_POSITION</span><span class=p>;</span>
                <span class=n>float4</span> <span class=n>TtoW0</span><span class=o>:</span><span class=n>TEXCOORD1</span><span class=p>;</span>
                <span class=n>float4</span> <span class=n>TtoW1</span><span class=o>:</span><span class=n>TEXCOORD2</span><span class=p>;</span>
                <span class=n>float4</span> <span class=n>TtoW2</span><span class=o>:</span><span class=n>TEXCOORD3</span><span class=p>;</span>
            <span class=p>};</span>

            <span class=n>v2f</span> <span class=n>vert</span> <span class=p>(</span><span class=n>appdata</span> <span class=n>v</span><span class=p>)</span>
            <span class=p>{</span>
                <span class=n>v2f</span> <span class=n>o</span><span class=p>;</span>
                <span class=n>o</span><span class=p>.</span><span class=n>posWorld</span> <span class=o>=</span> <span class=n>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span> <span class=c1>// é¡¶ç‚¹åæ ‡ä»æ¨¡å‹ç©ºé—´è½¬åˆ°è£å‰ªç©ºé—´</span>

                <span class=n>o</span><span class=p>.</span><span class=n>uv</span><span class=p>.</span><span class=n>xy</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>texcoord</span><span class=p>.</span><span class=n>xy</span> <span class=o>*</span> <span class=n>_MainTex_ST</span><span class=p>.</span><span class=n>xy</span> <span class=o>+</span> <span class=n>_MainTex_ST</span><span class=p>.</span><span class=n>zw</span><span class=p>;</span>   <span class=c1>// _MainTex ç¼©æ”¾å¹³ç§»å±æ€§</span>
                <span class=n>o</span><span class=p>.</span><span class=n>uv</span><span class=p>.</span><span class=n>zw</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>texcoord</span><span class=p>.</span><span class=n>xy</span> <span class=o>*</span> <span class=n>_BumpTex_ST</span><span class=p>.</span><span class=n>xy</span> <span class=o>+</span> <span class=n>_BumpTex_ST</span><span class=p>.</span><span class=n>zw</span><span class=p>;</span>   <span class=c1>// _BumpTex ç¼©æ”¾å¹³ç§»å±æ€§</span>

                <span class=n>half3</span> <span class=n>worldPos</span> <span class=o>=</span> <span class=n>mul</span><span class=p>(</span><span class=n>unity_ObjectToWorld</span><span class=p>,</span> <span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>).</span><span class=n>xyz</span><span class=p>;</span>     <span class=c1>// é¡¶ç‚¹ä½ç½®ä»æ¨¡å‹ç©ºé—´è½¬åˆ°ä¸–ç•Œç©ºé—´</span>
                <span class=n>half3</span> <span class=n>worldNormal</span> <span class=o>=</span> <span class=n>UnityObjectToWorldNormal</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>normal</span><span class=p>);</span>      <span class=c1>// é¡¶ç‚¹æ³•çº¿ä»æ¨¡å‹ç©ºé—´è½¬åˆ°ä¸–ç•Œç©ºé—´</span>
                <span class=n>half3</span> <span class=n>worldTangent</span> <span class=o>=</span> <span class=n>UnityObjectToWorldDir</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>tangent</span><span class=p>.</span><span class=n>xyz</span><span class=p>);</span>   <span class=c1>// é¡¶ç‚¹åˆ‡çº¿ä»æ¨¡å‹ç©ºé—´è½¬åˆ°ä¸–ç•Œç©ºé—´</span>
                <span class=n>half3</span> <span class=n>worldBinormal</span> <span class=o>=</span> <span class=n>cross</span><span class=p>(</span><span class=n>worldNormal</span><span class=p>,</span> <span class=n>worldTangent</span><span class=p>)</span> <span class=o>*</span> <span class=n>v</span><span class=p>.</span><span class=n>tangent</span><span class=p>.</span><span class=n>w</span><span class=p>;</span> <span class=c1>// è®¡ç®—ä¸–ç•Œç©ºé—´ä¸‹çš„å‰¯åˆ‡çº¿</span>

                <span class=n>o</span><span class=p>.</span><span class=n>TtoW0</span> <span class=o>=</span> <span class=n>float4</span><span class=p>(</span><span class=n>worldTangent</span><span class=p>.</span><span class=n>x</span><span class=p>,</span> <span class=n>worldBinormal</span><span class=p>.</span><span class=n>x</span><span class=p>,</span> <span class=n>worldNormal</span><span class=p>.</span><span class=n>x</span><span class=p>,</span> <span class=n>worldPos</span><span class=p>.</span><span class=n>x</span><span class=p>);</span>
                <span class=n>o</span><span class=p>.</span><span class=n>TtoW1</span> <span class=o>=</span> <span class=n>float4</span><span class=p>(</span><span class=n>worldTangent</span><span class=p>.</span><span class=n>y</span><span class=p>,</span> <span class=n>worldBinormal</span><span class=p>.</span><span class=n>y</span><span class=p>,</span> <span class=n>worldNormal</span><span class=p>.</span><span class=n>y</span><span class=p>,</span> <span class=n>worldPos</span><span class=p>.</span><span class=n>y</span><span class=p>);</span>
                <span class=n>o</span><span class=p>.</span><span class=n>TtoW2</span> <span class=o>=</span> <span class=n>float4</span><span class=p>(</span><span class=n>worldTangent</span><span class=p>.</span><span class=n>z</span><span class=p>,</span> <span class=n>worldBinormal</span><span class=p>.</span><span class=n>z</span><span class=p>,</span> <span class=n>worldNormal</span><span class=p>.</span><span class=n>z</span><span class=p>,</span> <span class=n>worldPos</span><span class=p>.</span><span class=n>z</span><span class=p>);</span>

                <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=n>fixed4</span> <span class=n>frag</span> <span class=p>(</span><span class=n>v2f</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>SV_Target</span>
            <span class=p>{</span>
                <span class=n>half3</span> <span class=n>worldPos</span> <span class=o>=</span> <span class=n>half3</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>TtoW0</span><span class=p>.</span><span class=n>w</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>TtoW1</span><span class=p>.</span><span class=n>w</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>TtoW2</span><span class=p>.</span><span class=n>w</span><span class=p>);</span>
                <span class=n>half3</span> <span class=n>lightDir</span> <span class=o>=</span> <span class=n>UnityWorldSpaceLightDir</span><span class=p>(</span><span class=n>worldPos</span><span class=p>);</span>
                <span class=n>half3</span> <span class=n>viewDir</span> <span class=o>=</span> <span class=n>UnityWorldSpaceViewDir</span><span class=p>(</span><span class=n>worldPos</span><span class=p>);</span>
                <span class=n>half3</span> <span class=n>halfDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>lightDir</span> <span class=o>+</span> <span class=n>viewDir</span><span class=p>);</span>

                <span class=n>half3</span> <span class=n>bump</span> <span class=o>=</span> <span class=n>UnpackNormal</span><span class=p>(</span><span class=n>tex2D</span><span class=p>(</span><span class=n>_BumpTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv</span><span class=p>.</span><span class=n>zw</span><span class=p>));</span> <span class=c1>// ä»æ³•çº¿è´´å‡ºä¸­è¯»å–æ³•çº¿ä¿¡æ¯</span>
                <span class=n>bump</span><span class=p>.</span><span class=n>xy</span><span class=o>*=</span><span class=n>_BumpScale</span><span class=p>;</span>   <span class=c1>// ç¼©æ”¾æ³•çº¿è´´å›¾</span>
                <span class=n>bump</span><span class=p>.</span><span class=n>z</span> <span class=o>=</span> <span class=n>sqrt</span><span class=p>(</span><span class=mf>1.0</span> <span class=o>-</span> <span class=n>dot</span><span class=p>(</span><span class=n>bump</span><span class=p>.</span><span class=n>xy</span><span class=p>,</span> <span class=n>bump</span><span class=p>.</span><span class=n>xy</span><span class=p>));</span>
                <span class=n>bump</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>half3</span><span class=p>(</span><span class=n>dot</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>TtoW0</span><span class=p>.</span><span class=n>xyz</span><span class=p>,</span> <span class=n>bump</span><span class=p>),</span> <span class=n>dot</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>TtoW1</span><span class=p>.</span><span class=n>xyz</span><span class=p>,</span> <span class=n>bump</span><span class=p>),</span> <span class=n>dot</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>TtoW2</span><span class=p>.</span><span class=n>xyz</span><span class=p>,</span> <span class=n>bump</span><span class=p>)));</span><span class=c1>// åˆ‡çº¿ç©ºé—´è½¬ä¸–ç•Œç©ºé—´</span>

                <span class=k>half</span> <span class=n>NdotL</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>bump</span><span class=p>,</span> <span class=n>lightDir</span><span class=p>));</span> <span class=c1>// lambert</span>
                <span class=k>half</span> <span class=n>NdotV</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>bump</span><span class=p>,</span> <span class=n>halfDir</span><span class=p>));</span>  <span class=c1>// blinn phong</span>

                <span class=n>half3</span> <span class=n>albedo</span> <span class=o>=</span> <span class=n>tex2D</span><span class=p>(</span><span class=n>_MainTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv</span><span class=p>).</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>_Color</span><span class=p>.</span><span class=n>rgb</span><span class=p>;</span>  <span class=c1>// è¯»å–æ¼«åå°„ç³»æ•°</span>
                <span class=n>half3</span> <span class=n>ambient</span> <span class=o>=</span> <span class=n>UNITY_LIGHTMODEL_AMBIENT</span><span class=p>.</span><span class=n>xyz</span> <span class=o>*</span> <span class=n>albedo</span><span class=p>;</span>  <span class=c1>// ç¯å¢ƒå…‰</span>

                <span class=n>half3</span> <span class=n>diffuse</span> <span class=o>=</span> <span class=n>_LightColor0</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>albedo</span> <span class=o>*</span> <span class=n>pow</span><span class=p>(</span><span class=n>NdotL</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>+</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>);</span>
                <span class=n>half3</span> <span class=n>specular</span> <span class=o>=</span> <span class=n>_LightColor0</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>_Specular</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>pow</span><span class=p>(</span><span class=n>NdotV</span><span class=p>,</span> <span class=n>_SpecularPower</span><span class=p>);</span>

                <span class=k>return</span> <span class=n>half4</span><span class=p>(</span><span class=n>diffuse</span> <span class=o>+</span> <span class=n>specular</span> <span class=o>+</span> <span class=n>ambient</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
            <span class=p>}</span>
            <span class=n>ENDCG</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>

</code></pre></div><h2 id=æ¸å˜çº¹ç†>æ¸å˜çº¹ç†</h2><p>å¦‚å¸¸è§„çº¹ç†ä¸€æ ·ï¼Œæˆ‘ä»¬åœ¨æ¸²æŸ“ä¸­ä½¿ç”¨çº¹ç†æ˜¯ä¸ºäº†å®šä¹‰ä¸€ä¸ªç‰©ä½“çš„é¢œè‰²ã€‚<strong>çº¹ç†å…¶å®å¯ä»¥ç”¨äºå­˜å‚¨ä»»ä½•è¡¨é¢å±æ€§</strong>ï¼Œä¸€ç§å¸¸è§çš„ä½œæ³•å°±æ˜¯ä½¿ç”¨çº¹ç†æ¸å˜æ¥æ§åˆ¶æ¼«åå°„å…‰ç…§ç»“æœã€‚å…¶æ ¸å¿ƒéƒ¨åˆ†æ˜¯çº¹ç†é‡‡æ ·è®¡ç®—éƒ¨åˆ†ï¼Œä½¿ç”¨äº† <strong>Half Lambert</strong> ä½œä¸ºé‡‡æ ·UVã€‚</p><blockquote><p>æ³¨æ„å°†çº¹ç†çš„ Wrap mode è®¾ä¸º Clamp</p></blockquote><p><figure style=flex-grow:177;flex-basis:426px><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/gradient.png data-size=1541x867><img src=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/gradient.png srcset="/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/gradient_hu553dc67d125d0461a42a74d531399e0e_372717_480x0_resize_box_2.png 480w, /p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/gradient_hu553dc67d125d0461a42a74d531399e0e_372717_1024x0_resize_box_2.png 1024w" width=1541 height=867 loading=lazy alt=æ¸å˜çº¹ç†></a><figcaption>æ¸å˜çº¹ç†</figcaption></figure></p><div class=highlight><pre class=chroma><code class=language-glsl data-lang=glsl><span class=n>Shader</span> <span class=err>&#34;</span><span class=n>Unlit</span><span class=o>/</span><span class=n>gradient</span><span class=err>&#34;</span>
<span class=p>{</span>
    <span class=n>Properties</span>
    <span class=p>{</span>
        <span class=n>_RampTex</span> <span class=p>(</span><span class=err>&#34;</span><span class=n>Ramp</span> <span class=n>Texture</span><span class=err>&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=err>&#34;</span><span class=n>white</span><span class=err>&#34;</span> <span class=p>{}</span>
        <span class=n>_Color</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Color</span> <span class=n>Tint</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>_Specular</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Specular</span> <span class=n>Color</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>_SpecularPower</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Specular</span> <span class=n>Power</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Range</span><span class=p>(</span><span class=mf>8.0</span><span class=p>,</span> <span class=mi>256</span><span class=p>))</span> <span class=o>=</span> <span class=mi>20</span>
    <span class=p>}</span>
    <span class=n>SubShader</span>
    <span class=p>{</span>
        <span class=n>Tags</span> <span class=p>{</span> <span class=err>&#34;</span><span class=n>RenderType</span><span class=err>&#34;</span><span class=o>=</span><span class=err>&#34;</span><span class=n>Opaque</span><span class=err>&#34;</span> <span class=err>&#34;</span><span class=n>LightModel</span><span class=err>&#34;</span><span class=o>=</span><span class=err>&#34;</span><span class=n>ForwardBase</span><span class=err>&#34;</span> <span class=p>}</span>

        <span class=n>Pass</span>
        <span class=p>{</span>
            <span class=n>CGPROGRAM</span>
            <span class=err>#</span><span class=n>pragma</span> <span class=n>vertex</span> <span class=n>vert</span>
            <span class=err>#</span><span class=n>pragma</span> <span class=n>fragment</span> <span class=n>frag</span>

            <span class=err>#</span><span class=n>include</span> <span class=err>&#34;</span><span class=n>UnityCG</span><span class=p>.</span><span class=n>cginc</span><span class=err>&#34;</span>
            <span class=err>#</span><span class=n>include</span> <span class=err>&#34;</span><span class=n>Lighting</span><span class=p>.</span><span class=n>cginc</span><span class=err>&#34;</span>

            <span class=k>sampler2D</span> <span class=n>_RampTex</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_RampTex_ST</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_Color</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_Specular</span><span class=p>;</span>
            <span class=n>Float</span> <span class=n>_SpecularPower</span><span class=p>;</span>

            <span class=k>struct</span> <span class=n>appdata</span>
            <span class=p>{</span>
                <span class=n>float4</span> <span class=n>vertex</span> <span class=o>:</span> <span class=n>POSITION</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>normal</span> <span class=o>:</span> <span class=n>NORMAL</span><span class=p>;</span>
                <span class=n>float2</span> <span class=n>texcoord</span> <span class=o>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
            <span class=p>};</span>

            <span class=k>struct</span> <span class=n>v2f</span>
            <span class=p>{</span>
                <span class=n>float4</span> <span class=n>posWorld</span> <span class=o>:</span> <span class=n>SV_POSITION</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>worldNormal</span> <span class=o>:</span> <span class=n>TEXCOORD1</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>worldPos</span> <span class=o>:</span> <span class=n>TEXCOORD2</span><span class=p>;</span>
                <span class=n>float2</span> <span class=n>uv</span> <span class=o>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
            <span class=p>};</span>

            <span class=n>v2f</span> <span class=n>vert</span> <span class=p>(</span><span class=n>appdata</span> <span class=n>v</span><span class=p>)</span>
            <span class=p>{</span>
                <span class=n>v2f</span> <span class=n>o</span><span class=p>;</span>
                <span class=n>o</span><span class=p>.</span><span class=n>posWorld</span> <span class=o>=</span> <span class=n>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span> <span class=c1>// é¡¶ç‚¹åæ ‡ä»æ¨¡å‹ç©ºé—´è½¬åˆ°ä¸–ç•Œç©ºé—´</span>
                <span class=n>o</span><span class=p>.</span><span class=n>worldNormal</span> <span class=o>=</span> <span class=n>UnityObjectToWorldNormal</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>normal</span><span class=p>);</span>    <span class=c1>// æ³•çº¿ä»æ¨¡å‹ç©ºé—´è½¬åˆ°ä¸–ç•Œç©ºé—´</span>
                <span class=n>o</span><span class=p>.</span><span class=n>worldPos</span> <span class=o>=</span> <span class=n>mul</span><span class=p>(</span><span class=n>unity_ObjectToWorld</span><span class=p>,</span> <span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>).</span><span class=n>xyz</span><span class=p>;</span>   <span class=c1>// ä½ç½®ä»æ¨¡å‹ç©ºé—´è½¬åˆ°ä¸–ç•Œç©ºé—´</span>
                <span class=n>o</span><span class=p>.</span><span class=n>uv</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>texcoord</span><span class=p>.</span><span class=n>xy</span> <span class=o>*</span> <span class=n>_RampTex_ST</span><span class=p>.</span><span class=n>xy</span> <span class=o>+</span> <span class=n>_RampTex_ST</span><span class=p>.</span><span class=n>zw</span><span class=p>;</span> <span class=c1>// UV çš„ç¼©æ”¾å’Œå¹³ç§»å±æ€§</span>
                <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=n>fixed4</span> <span class=n>frag</span> <span class=p>(</span><span class=n>v2f</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>SV_Target</span>
            <span class=p>{</span>
                <span class=n>half3</span> <span class=n>worldNormal</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>worldNormal</span><span class=p>);</span> <span class=c1>// å½’ä¸€åŒ–æ³•çº¿æ–¹å‘</span>
                <span class=n>half3</span> <span class=n>worldLightDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>UnityWorldSpaceLightDir</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>worldPos</span><span class=p>));</span> <span class=c1>// å½’ä¸€åŒ–ä¸»å…‰æºæ–¹å‘</span>
                <span class=n>half3</span> <span class=n>worldViewDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>UnityWorldSpaceViewDir</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>worldPos</span><span class=p>));</span>   <span class=c1>// å½’ä¸€åŒ–è§†è§’æ–¹å‘</span>
                <span class=n>half3</span> <span class=n>halfDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>worldLightDir</span> <span class=o>+</span> <span class=n>worldViewDir</span><span class=p>);</span>              <span class=c1>// å½’ä¸€åŒ–åŠè§’æ–¹å‘</span>

                <span class=k>half</span> <span class=n>NdotL</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>worldNormal</span><span class=p>,</span> <span class=n>worldLightDir</span><span class=p>)</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>+</span> <span class=mf>0.5</span><span class=p>);</span>   <span class=c1>// lambert</span>
                <span class=k>half</span> <span class=n>NdotV</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>worldNormal</span><span class=p>,</span> <span class=n>halfDir</span><span class=p>));</span>

                <span class=n>half3</span> <span class=n>ambient</span> <span class=o>=</span> <span class=n>UNITY_LIGHTMODEL_AMBIENT</span><span class=p>.</span><span class=n>xyz</span><span class=p>;</span>                         <span class=c1>// ç¯å¢ƒå…‰</span>
                <span class=n>half3</span> <span class=n>diffuseColor</span> <span class=o>=</span> <span class=n>tex2D</span><span class=p>(</span><span class=n>_RampTex</span><span class=p>,</span> <span class=n>half2</span><span class=p>(</span><span class=n>NdotL</span><span class=p>,</span> <span class=n>NdotL</span><span class=p>)).</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>_Color</span><span class=p>.</span><span class=n>rgb</span><span class=p>;</span> <span class=c1>// åå°„é¢œè‰² = ä½¿ç”¨æ¸å˜çº¹ç†æ¥é‡‡æ ·åŠå…°ä¼¯ç‰¹å…‰ç…§ç”Ÿæˆçš„çº¹ç†</span>
                <span class=n>half3</span> <span class=n>diffuse</span> <span class=o>=</span> <span class=n>_LightColor0</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>diffuseColor</span><span class=p>;</span>
                <span class=n>half3</span> <span class=n>specular</span> <span class=o>=</span> <span class=n>_LightColor0</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>_Specular</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>pow</span><span class=p>(</span><span class=n>NdotV</span><span class=p>,</span> <span class=n>_SpecularPower</span><span class=p>);</span>

                <span class=k>return</span> <span class=n>half4</span><span class=p>(</span><span class=n>ambient</span> <span class=o>+</span> <span class=n>diffuse</span> <span class=o>+</span> <span class=n>specular</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
            <span class=p>}</span>
            <span class=n>ENDCG</span>
        <span class=p>}</span>
    <span class=p>}</span>
            <span class=n>FallBack</span> <span class=err>&#34;</span><span class=n>Specular</span><span class=err>&#34;</span>
<span class=p>}</span>

</code></pre></div><h2 id=é®ç½©çº¹ç†>é®ç½©çº¹ç†</h2><p>é®ç½©çº¹ç†å¯ä»¥è®©æˆ‘ä»¬æ›´åŠ è‡ªç”±çš„æ§åˆ¶æ¨¡å‹è¡¨é¢çš„æ€§è´¨ã€‚é®ç½©çº¹ç†çš„ä½¿ç”¨ä¸€èˆ¬æ˜¯ï¼šé€šè¿‡é‡‡æ ·å¾—åˆ°é®ç½©çº¹ç†çš„çº¹ç´ å€¼ï¼Œç„¶åä½¿ç”¨å…¶ä¸­æŸä¸ªï¼ˆæˆ–æŸå‡ ä¸ªï¼‰é€šé“çš„å€¼æ¥ä¸æŸç§è¡¨é¢å±æ€§è¿›è¡Œç›¸ä¹˜ï¼Œè¿™æ ·ï¼Œå½“è¯¥é€šé“çš„å€¼ä¸º0æ—¶ï¼Œå¯ä»¥ä¿æŠ¤è¡¨é¢ä¸å—è¯¥å±æ€§çš„å½±å“ã€‚è¿™é‡Œæ ·ä¾‹ä½¿ç”¨çš„é«˜å…‰çš„ <strong>mask</strong> ï¼Œå¹¶ä¸”æ˜¯çº¹ç†çš„ <strong>r</strong> é€šé“ã€‚</p><p><figure style=flex-grow:177;flex-basis:425px><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/mask.png data-size=1537x867><img src=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/mask.png srcset="/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/mask_hu6ab1f5e7d148a1d5886edf48c8120b93_314054_480x0_resize_box_2.png 480w, /p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/mask_hu6ab1f5e7d148a1d5886edf48c8120b93_314054_1024x0_resize_box_2.png 1024w" width=1537 height=867 loading=lazy alt="MainBump + MainBumpMask"></a><figcaption>MainBump + MainBumpMask</figcaption></figure></p><div class=highlight><pre class=chroma><code class=language-glsl data-lang=glsl><span class=n>Shader</span> <span class=err>&#34;</span><span class=n>Unlit</span><span class=o>/</span><span class=n>mask</span><span class=err>&#34;</span>
<span class=p>{</span>
    <span class=n>Properties</span>
    <span class=p>{</span>
        <span class=n>_MainTex</span> <span class=p>(</span><span class=err>&#34;</span><span class=n>MainTex</span><span class=err>&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=err>&#34;</span><span class=n>white</span><span class=err>&#34;</span> <span class=p>{}</span>
        <span class=n>_Color</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Color</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>_BumpTex</span><span class=p>(</span><span class=err>&#34;</span><span class=n>BumpTex</span><span class=err>&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=err>&#34;</span><span class=n>whire</span><span class=err>&#34;</span> <span class=p>{}</span>
        <span class=n>_BumpScale</span><span class=p>(</span><span class=err>&#34;</span><span class=n>BumptScale</span><span class=err>&#34;</span><span class=p>,</span><span class=n>Float</span><span class=p>)</span> <span class=o>=</span> <span class=mf>1.0</span>
        <span class=n>_SpecularMask</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Specular</span> <span class=n>Mask</span><span class=err>&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=n>D</span><span class=p>)</span> <span class=o>=</span> <span class=err>&#34;</span><span class=n>white</span><span class=err>&#34;</span> <span class=p>{}</span>
        <span class=n>_SpecularScale</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Specular</span> <span class=n>Scale</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Float</span><span class=p>)</span> <span class=o>=</span> <span class=mf>1.0</span>
        <span class=n>_Specular</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Specualr</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>_SpecularPower</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Specular</span> <span class=n>Power</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Range</span><span class=p>(</span><span class=mf>8.0</span><span class=p>,</span> <span class=mi>256</span><span class=p>))</span> <span class=o>=</span> <span class=mi>20</span>
    <span class=p>}</span>
    <span class=n>SubShader</span>
    <span class=p>{</span>
        <span class=n>Tags</span> <span class=p>{</span> <span class=err>&#34;</span><span class=n>RenderType</span><span class=err>&#34;</span><span class=o>=</span><span class=err>&#34;</span><span class=n>Opaque</span><span class=err>&#34;</span> <span class=err>&#34;</span><span class=n>LightModel</span><span class=err>&#34;</span><span class=o>=</span><span class=err>&#34;</span><span class=n>ForwardBase</span><span class=err>&#34;</span> <span class=p>}</span>
        <span class=n>LOD</span> <span class=mi>100</span>

        <span class=n>Pass</span>
        <span class=p>{</span>
            <span class=n>CGPROGRAM</span>
            <span class=err>#</span><span class=n>pragma</span> <span class=n>vertex</span> <span class=n>vert</span>
            <span class=err>#</span><span class=n>pragma</span> <span class=n>fragment</span> <span class=n>frag</span>

            <span class=err>#</span><span class=n>include</span> <span class=err>&#34;</span><span class=n>UnityCG</span><span class=p>.</span><span class=n>cginc</span><span class=err>&#34;</span>
            <span class=err>#</span><span class=n>include</span> <span class=err>&#34;</span><span class=n>Lighting</span><span class=p>.</span><span class=n>cginc</span><span class=err>&#34;</span>

            <span class=k>sampler2D</span> <span class=n>_MainTex</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_MainTex_ST</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_Color</span><span class=p>;</span>
            <span class=k>sampler2D</span> <span class=n>_BumpTex</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_BumpTex_ST</span><span class=p>;</span>
            <span class=k>float</span> <span class=n>_BumpScale</span><span class=p>;</span>
            <span class=k>sampler2D</span> <span class=n>_SpecularMask</span><span class=p>;</span>
            <span class=k>float</span> <span class=n>_SpecularScale</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_Specular</span><span class=p>;</span>
            <span class=k>float</span> <span class=n>_SpecularPower</span><span class=p>;</span>

            <span class=k>struct</span> <span class=n>appdata</span>
            <span class=p>{</span>
                <span class=n>float4</span> <span class=n>vertex</span> <span class=o>:</span> <span class=n>POSITION</span><span class=p>;</span>
                <span class=n>float4</span> <span class=n>texcoord</span> <span class=o>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>normal</span> <span class=o>:</span> <span class=n>NORMAL</span><span class=p>;</span>
                <span class=n>float4</span> <span class=n>tangent</span> <span class=o>:</span> <span class=n>TANGENT</span><span class=p>;</span>
            <span class=p>};</span>

            <span class=k>struct</span> <span class=n>v2f</span>
            <span class=p>{</span>
                <span class=n>float4</span> <span class=n>posWorld</span> <span class=o>:</span> <span class=n>SV_POSITION</span><span class=p>;</span>
                <span class=n>float4</span> <span class=n>uv</span> <span class=o>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>lightDir</span> <span class=o>:</span> <span class=n>TEXCOORD1</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>viewDir</span> <span class=o>:</span> <span class=n>TEXCOORD2</span><span class=p>;</span>
            <span class=p>};</span>

            <span class=n>v2f</span> <span class=n>vert</span> <span class=p>(</span><span class=n>appdata</span> <span class=n>v</span><span class=p>)</span>
            <span class=p>{</span>
                <span class=n>v2f</span> <span class=n>o</span><span class=p>;</span>
                <span class=n>o</span><span class=p>.</span><span class=n>posWorld</span> <span class=o>=</span> <span class=n>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span>  <span class=c1>// é¡¶ç‚¹åæ ‡ä»æ¨¡å‹ç©ºé—´è½¬ä¸–ç•Œç©ºé—´</span>
                <span class=n>o</span><span class=p>.</span><span class=n>uv</span><span class=p>.</span><span class=n>xy</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>texcoord</span><span class=p>.</span><span class=n>xy</span> <span class=o>*</span> <span class=n>_MainTex_ST</span><span class=p>.</span><span class=n>xy</span> <span class=o>+</span> <span class=n>_MainTex_ST</span><span class=p>.</span><span class=n>zw</span><span class=p>;</span> <span class=c1>// _MainTex çš„ç¼©æ”¾å’Œå¹³ç§»</span>
                <span class=n>o</span><span class=p>.</span><span class=n>uv</span><span class=p>.</span><span class=n>zw</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>texcoord</span><span class=p>.</span><span class=n>xy</span> <span class=o>*</span> <span class=n>_BumpTex_ST</span><span class=p>.</span><span class=n>xy</span> <span class=o>+</span> <span class=n>_BumpTex_ST</span><span class=p>.</span><span class=n>zw</span><span class=p>;</span> <span class=c1>// _BumpTex çš„ç¼©æ”¾å’Œå¹³ç§»</span>

                <span class=n>float3</span> <span class=n>binormal</span> <span class=o>=</span> <span class=n>cross</span><span class=p>(</span><span class=n>normalize</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>normal</span><span class=p>),</span> <span class=n>normalize</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>tangent</span><span class=p>))</span> <span class=o>*</span> <span class=n>v</span><span class=p>.</span><span class=n>tangent</span><span class=p>.</span><span class=n>w</span><span class=p>;</span> <span class=c1>// å‰¯åˆ‡çº¿</span>
                <span class=n>float3x3</span> <span class=n>rotation</span> <span class=o>=</span> <span class=n>float3x3</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>tangent</span><span class=p>.</span><span class=n>xyz</span><span class=p>,</span> <span class=n>binormal</span><span class=p>,</span> <span class=n>v</span><span class=p>.</span><span class=n>normal</span><span class=p>);</span>                  <span class=c1>// å˜æ¢çŸ©é˜µ</span>

                <span class=n>o</span><span class=p>.</span><span class=n>lightDir</span> <span class=o>=</span> <span class=n>mul</span><span class=p>(</span><span class=n>rotation</span><span class=p>,</span> <span class=n>ObjSpaceLightDir</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>)).</span><span class=n>xyz</span><span class=p>;</span> <span class=c1>// ä¸»å…‰æºæ–¹å‘ä»æ¨¡å‹ç©ºé—´è½¬åˆ°åˆ‡çº¿ç©ºé—´</span>
                <span class=n>o</span><span class=p>.</span><span class=n>viewDir</span> <span class=o>=</span> <span class=n>mul</span><span class=p>(</span><span class=n>rotation</span><span class=p>,</span> <span class=n>ObjSpaceViewDir</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>)).</span><span class=n>xyz</span><span class=p>;</span>   <span class=c1>// è§†è§’æ–¹å‘ä»æ¨¡å‹ç©ºé—´è½¬åˆ°åˆ‡çº¿ç©ºé—´</span>
                <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=n>fixed4</span> <span class=n>frag</span> <span class=p>(</span><span class=n>v2f</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>SV_Target</span>
            <span class=p>{</span>
                <span class=n>half3</span> <span class=n>tangentLightDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>lightDir</span><span class=p>);</span> <span class=c1>// åˆ‡çº¿ç©ºé—´ä¸‹ä¸»å…‰æºæ–¹å‘</span>
                <span class=n>half3</span> <span class=n>tangentViewDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>viewDir</span><span class=p>);</span>   <span class=c1>// åˆ‡çº¿ç©ºé—´ä¸‹çš„è§†è§’æ–¹å‘</span>
                <span class=n>half3</span> <span class=n>halfDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>tangentLightDir</span> <span class=o>+</span> <span class=n>tangentViewDir</span><span class=p>);</span> <span class=c1>// åŠè§’æ–¹å‘</span>

                <span class=n>half3</span> <span class=n>tangentNormal</span> <span class=o>=</span> <span class=n>UnpackNormal</span><span class=p>(</span><span class=n>tex2D</span><span class=p>(</span><span class=n>_BumpTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv</span><span class=p>.</span><span class=n>zw</span><span class=p>));</span> <span class=c1>// ä»æ³•çº¿è´´å›¾è¯»å–æ³•çº¿ä¿¡æ¯</span>
                <span class=n>tangentNormal</span><span class=p>.</span><span class=n>xy</span> <span class=o>*=</span> <span class=n>_BumpScale</span><span class=p>;</span>                               <span class=c1>// ç¼©æ”¾æ³•çº¿</span>
                <span class=n>tangentNormal</span><span class=p>.</span><span class=n>z</span> <span class=o>=</span> <span class=n>sqrt</span><span class=p>(</span><span class=mf>1.0</span> <span class=o>-</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>tangentNormal</span><span class=p>.</span><span class=n>xy</span><span class=p>,</span> <span class=n>tangentNormal</span><span class=p>.</span><span class=n>xy</span><span class=p>)));</span> <span class=c1>// è®¡ç®—æ³•çº¿çš„ z å€¼</span>

                <span class=k>half</span> <span class=n>NdotL</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>tangentNormal</span><span class=p>,</span> <span class=n>tangentLightDir</span><span class=p>));</span>   <span class=c1>// lambert</span>
                <span class=k>half</span> <span class=n>NdotV</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>tangentNormal</span><span class=p>,</span> <span class=n>halfDir</span><span class=p>));</span>           <span class=c1>// blinn-phong</span>

                <span class=n>half3</span> <span class=n>albedo</span> <span class=o>=</span> <span class=n>tex2D</span><span class=p>(</span><span class=n>_MainTex</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv</span><span class=p>.</span><span class=n>xy</span><span class=p>).</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>_Color</span><span class=p>.</span><span class=n>rgb</span><span class=p>;</span>     <span class=c1>// ä»æè´¨è´´å›¾è®¡ç®—æ¼«åå°„ç‡</span>
                <span class=n>half3</span> <span class=n>ambient</span> <span class=o>=</span> <span class=n>UNITY_LIGHTMODEL_AMBIENT</span><span class=p>.</span><span class=n>xyz</span> <span class=o>*</span> <span class=n>albedo</span><span class=p>;</span>        <span class=c1>// ç¯å¢ƒå…‰</span>
                <span class=n>half3</span> <span class=n>diffuse</span> <span class=o>=</span> <span class=n>_LightColor0</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>albedo</span> <span class=o>*</span> <span class=p>(</span><span class=n>NdotL</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>+</span><span class=mf>0.5</span><span class=p>);</span>   <span class=c1>// è®¡ç®—æ¼«åå°„å…‰</span>

                <span class=k>half</span> <span class=n>specularMask</span> <span class=o>=</span> <span class=n>tex2D</span><span class=p>(</span><span class=n>_SpecularMask</span><span class=p>,</span> <span class=n>i</span><span class=p>.</span><span class=n>uv</span><span class=p>).</span><span class=n>r</span> <span class=o>*</span> <span class=n>_Specular</span><span class=p>.</span><span class=n>rgb</span><span class=p>;</span> <span class=c1>// ä»é«˜å…‰è´´å›¾ä¸­è¯»å–é«˜å…‰åå°„å€¼</span>
                <span class=n>half3</span> <span class=n>specular</span> <span class=o>=</span> <span class=n>_LightColor0</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>_Specular</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>specularMask</span> <span class=o>*</span> <span class=n>pow</span><span class=p>(</span><span class=n>NdotV</span><span class=p>,</span> <span class=n>_SpecularPower</span><span class=p>);</span>

                <span class=k>return</span> <span class=n>half4</span><span class=p>(</span><span class=n>ambient</span> <span class=o>+</span> <span class=n>diffuse</span> <span class=o>+</span> <span class=n>specular</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
            <span class=p>}</span>
            <span class=n>ENDCG</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>

</code></pre></div><p><strong>æ‹“å±•</strong> ï¼šMask çš„åº”ç”¨è¿˜æœ‰å¾ˆå¤§çš„ç©ºé—´ï¼Œå¯ä»¥è¯•ç€ä¸¾ä¾‹å‡ºæ¥ï¼šUV é¡¶ç‚¹åŠ¨ç”»ã€‚</p><h2 id=æ€»ç»“>æ€»ç»“</h2><table><thead><tr><th></th><th>æ¼«åå°„ç³»æ•°</th><th>æ³•çº¿ç³»æ•°</th></tr></thead><tbody><tr><td>æ— çº¹ç†</td><td>1</td><td>æ¨¡å‹æ³•çº¿</td></tr><tr><td>å¸¸è§„çº¹ç†</td><td>tex2D(_MainTex,i.uv).rgb * _Color.rgb</td><td>æ¨¡å‹æ³•çº¿</td></tr><tr><td>æ³•çº¿çº¹ç†</td><td>tex2D(_MainTex,i.uv) * _Color.rgb</td><td>tex2D(_BumpTex,i.uv.zw)</td></tr><tr><td>æ¸å˜çº¹ç†</td><td>tex2D(_RampTex, <em>half2</em>(NdotL, NdotL)).rgb * _Color.rgb</td><td>æ¨¡å‹æ³•çº¿</td></tr><tr><td>é®ç½©çº¹ç†</td><td>tex2D(_MainTex, i.uv.xy).rgb * _Color.rgb</td><td>(tex2D(_BumpTex, i.uv.zw)</td></tr></tbody></table></section><footer class=article-footer><section class=article-tags><a href=/tags/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81/>Shaderå…¥é—¨ç²¾è¦</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>Related contents</h2><div class=related-contents><div class="flex article-list--tile"><article class=has-image><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%94%BB%E9%9D%A2%E5%8A%A8%E8%B5%B7%E6%9D%A5/><div class=article-image><img src=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%94%BB%E9%9D%A2%E5%8A%A8%E8%B5%B7%E6%9D%A5/topimg.da92c8fea658637ee841a18e087c1f1f_huc02f10a1e3cad6ccefc74d8d773bec3e_154933_250x150_fill_box_smart1_2.png width=250 height=150 loading=lazy data-key data-hash="md5-2pLI/qZYY37oQaGOCHwfHw=="></div><div class=article-details><h2 class=article-title>Shaderå…¥é—¨ç²¾è¦-ç”»é¢åŠ¨èµ·æ¥</h2></div></a></article><article class=has-image><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E9%AB%98%E7%BA%A7%E7%BA%B9%E7%90%86/><div class=article-image><img src=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E9%AB%98%E7%BA%A7%E7%BA%B9%E7%90%86/topimg.67a55883ca0dddee7a38aee92b8bd0c8_hufdc4047d1f13243dc00ee98ca40c3721_1787439_250x150_fill_box_smart1_2.png width=250 height=150 loading=lazy data-key data-hash="md5-Z6VYg8oN3e56OK7pK4vQyA=="></div><div class=article-details><h2 class=article-title>Shaderå…¥é—¨ç²¾è¦-é«˜çº§çº¹ç†</h2></div></a></article><article class=has-image><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E6%9B%B4%E5%8A%A0%E5%A4%8D%E6%9D%82%E7%9A%84%E5%85%89%E7%85%A7/><div class=article-image><img src=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E6%9B%B4%E5%8A%A0%E5%A4%8D%E6%9D%82%E7%9A%84%E5%85%89%E7%85%A7/topimg.6c5c6801e5665142f1afc74f7eccabb9_hud5b4711730563b8f6fe841cfaa71f45d_221051_250x150_fill_box_smart1_2.png width=250 height=150 loading=lazy data-key data-hash="md5-bFxoAeVmUULxr8dPfsyruQ=="></div><div class=article-details><h2 class=article-title>Shaderå…¥é—¨ç²¾è¦-æ›´åŠ å¤æ‚çš„å…‰ç…§</h2></div></a></article><article class=has-image><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E9%80%8F%E6%98%8E%E6%95%88%E6%9E%9C/><div class=article-image><img src=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E9%80%8F%E6%98%8E%E6%95%88%E6%9E%9C/topimg.d65ee7581cfef7096ee4aec08398a608_hucec924f8a8d5e17115b60defab86f43b_300097_250x150_fill_box_smart1_2.png width=250 height=150 loading=lazy data-key data-hash="md5-1l7nWBz+9wlu5K7Ag5imCA=="></div><div class=article-details><h2 class=article-title>Shaderå…¥é—¨ç²¾è¦-é€æ˜æ•ˆæœ</h2></div></a></article><article class=has-image><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%AE%80%E5%8D%95%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/><div class=article-image><img src=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%AE%80%E5%8D%95%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/topimg.133a0281833f182f38ff49d986a235dc_hubb21fb6872520e85a0401e3049fab639_84088_250x150_fill_q75_h2_box_smart1.webp width=250 height=150 loading=lazy data-key data-hash="md5-EzoCgYM/GC84/0nZhqI13A=="></div><div class=article-details><h2 class=article-title>Shaderå…¥é—¨ç²¾è¦-ç®€å•å…‰ç…§æ¨¡å‹</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=YanTree/HUGO_COMMENT issue-term=YanTree/HUGO_COMMENT crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>function setUtterancesTheme(b){let a=document.querySelector('.utterances iframe');a&&a.contentWindow.postMessage({type:'set-theme',theme:`github-${b}`},'https://utteranc.es')}addEventListener('message',a=>{if(a.origin!=='https://utteranc.es')return;setUtterancesTheme(document.body.dataset.scheme)}),window.addEventListener('onColorSchemeChange',a=>{setUtterancesTheme(a.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2021 YanTree</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=2.3.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script></body></html>