<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="ä»‹ç» Lambert Phong ç­‰å…‰ç…§æ¨¡å‹"><title>Shaderå…¥é—¨ç²¾è¦-ç®€å•å…‰ç…§æ¨¡å‹</title><link rel=canonical href=https://yantree.github.io/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%AE%80%E5%8D%95%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/><link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="Shaderå…¥é—¨ç²¾è¦-ç®€å•å…‰ç…§æ¨¡å‹"><meta property="og:description" content="ä»‹ç» Lambert Phong ç­‰å…‰ç…§æ¨¡å‹"><meta property="og:url" content="https://yantree.github.io/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%AE%80%E5%8D%95%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/"><meta property="og:site_name" content="YanTree"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Shaderå…¥é—¨ç²¾è¦"><meta property="article:published_time" content="2021-05-28T22:34:22+08:00"><meta property="article:modified_time" content="2021-05-28T22:34:22+08:00"><meta property="og:image" content="https://yantree.github.io/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%AE%80%E5%8D%95%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/topimg.webp"><meta name=twitter:title content="Shaderå…¥é—¨ç²¾è¦-ç®€å•å…‰ç…§æ¨¡å‹"><meta name=twitter:description content="ä»‹ç» Lambert Phong ç­‰å…‰ç…§æ¨¡å‹"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://yantree.github.io/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%AE%80%E5%8D%95%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/topimg.webp"><link rel="shortcut icon" href=img/favicon.ico></head><body><script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"auto")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.body.dataset.scheme='dark':document.body.dataset.scheme='light'})()</script><div class="container main-container flex on-phone--column extended article-page with-toolbar"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header class=site-info><figure class=site-avatar><img src=/img/avatar_hud8215445c04336af6f3d5658bab85db7_7222_300x0_resize_box_2.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
<span class=emoji>ğŸ¥</span></figure><h1 class=site-name><a href=https://yantree.github.io/>YanTree</a></h1><h2 class=site-description>å­éè¶ï¼Œäº¦éå‘¨</h2></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>ä¸»é¡µ</span></a></li><li><a href=/%E5%85%B3%E4%BA%8E/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>å…³äº</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>å½’æ¡£</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>æœç´¢</span></a></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>æš—è‰²æ¨¡å¼</span></li></ol></aside><main class="main full-width"><div id=article-toolbar><a href=https://yantree.github.io/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>Back</span></a></div><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%AE%80%E5%8D%95%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/><img src=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%AE%80%E5%8D%95%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/topimg_hubb21fb6872520e85a0401e3049fab639_84088_800x0_resize_q75_h2_box.webp srcset="/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%AE%80%E5%8D%95%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/topimg_hubb21fb6872520e85a0401e3049fab639_84088_800x0_resize_q75_h2_box.webp 800w, /p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%AE%80%E5%8D%95%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/topimg_hubb21fb6872520e85a0401e3049fab639_84088_1600x0_resize_q75_h2_box.webp 1600w" width=800 height=433 loading=lazy alt="Featured image of post Shaderå…¥é—¨ç²¾è¦-ç®€å•å…‰ç…§æ¨¡å‹"></a></div><div class=article-details><header class=article-category><a href=/categories/%E6%B8%B2%E6%9F%93/>æ¸²æŸ“</a></header><h2 class=article-title><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%AE%80%E5%8D%95%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/>Shaderå…¥é—¨ç²¾è¦-ç®€å•å…‰ç…§æ¨¡å‹</a></h2><h3 class=article-subtitle>ä»‹ç» Lambert Phong ç­‰å…‰ç…§æ¨¡å‹</h3><footer class=article-time><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--published>May 28, 2021</time></footer></div></header><section class=article-content><h1 id=æŠ€æœ¯ç¾æœ¯åŸºç¡€å…‰ç…§æ¨¡å‹>æŠ€æœ¯ç¾æœ¯â€”â€”åŸºç¡€å…‰ç…§æ¨¡å‹</h1><h2 id=lambert>Lambert</h2><p>Lambert å…‰ç…§æ¨¡å‹çš„å…‰ç…§è®¡ç®—ç®€å•ç²—æš´ï¼Œæ˜¯å…‰æºæ–¹å‘ç‚¹æˆæ³•çº¿æ–¹å‘ï¼Œå…¶å€¼åœ¨ [-1, 1] ä¹‹é—´ï¼ŒåŸºæœ¬è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><blockquote><p>C = (c * m) * max(0 , n * l )</p></blockquote><div class=highlight><pre class=chroma><code class=language-glsl data-lang=glsl><span class=c1>// æ³•çº¿æ–¹å‘ç‚¹ä¹˜å…‰æºæ–¹å‘</span>
<span class=k>float</span> <span class=n>NdotL</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=n>dot</span><span class=p>(</span><span class=n>normalDirection</span><span class=p>,</span><span class=n>lightDirection</span><span class=p>));</span>
<span class=k>float</span> <span class=n>LambertDiffuse</span> <span class=o>=</span> <span class=n>NdotL</span> <span class=o>*</span> <span class=n>SurfaceColor</span><span class=p>;</span>
<span class=n>float3</span> <span class=n>finalColor</span> <span class=o>=</span> <span class=n>LambertDiffuse</span> <span class=o>*</span> <span class=n>LightColor</span><span class=p>;</span>
</code></pre></div><h2 id=half-lambert>Half Lambert</h2><p>Lambert å…‰ç…§æ¨¡å‹æ˜¯ä¸€ä¸ªç®€å•æ–¹ä¾¿çš„å…‰ç…§è®¡ç®—æ¨¡å‹ï¼Œä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªé—®é¢˜å­˜åœ¨ã€‚åœ¨å…‰ç…§æ— æ³•ç…§å°„çš„åŒºåŸŸï¼Œæ¨¡å‹å¤–è§‚å˜æˆäº†å…¨é»‘ï¼Œæ²¡æœ‰ä»»ä½•æ˜æš—çš„å˜åŒ–ï¼Œä½¿å¾—æ¨¡å‹èƒŒå…‰åŒºçœ‹èµ·æ¥åƒä¸€ä¸ªå¹³é¢ï¼Œå¤±å»äº†æ¨¡å‹ç»†èŠ‚è¡¨ç°ã€‚å¯ä»¥é€šè¿‡æ·»åŠ ç¯å¢ƒå…‰æ¥å¾—åˆ°éå…¨é»‘çš„æ•ˆæœï¼Œä½†å³ä½¿è¿™æ ·ä»ç„¶æ— æ³•è§£å†³èƒŒå…‰é¢æ˜æš—ä¸€æ ·çš„ç¼ºç‚¹ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰äººåœ¨ Lambert å…‰ç…§æ¨¡å‹çš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹è‰¯ï¼Œè¿™å°±æ˜¯ <code>Half Lambert</code> å…‰ç…§æ¨¡å‹ï¼Œé€šè¿‡ä¹˜ä»¥ä¸€ä¸ªç³»æ•° a å†åŠ ä¸Šä¸€ä¸ªç³»æ•° b çš„æ–¹æ³•ï¼Œå°† <code>Lambert</code> å…‰ç…§æ¨¡å‹çš„å€¼ [-1, 1] é‡æ–°æ˜ å°„è‡³ [-a + b, a + b]ï¼Œç»å¤§å¤šæ•°æƒ…å†µä¸‹ a b çš„å€¼éƒ½å– 0.5 ï¼Œè¿™æ · <code>Half Lambert</code> å…‰ç…§æ¨¡å‹çš„å€¼ [0, 1]ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šæ”¹å–„äº† <code>Lambert</code> å…‰ç…§æ¨¡å‹æ‰€å¸¦æ¥çš„é—®é¢˜ï¼š</p><div class=highlight><pre class=chroma><code class=language-glsl data-lang=glsl><span class=c1>// </span>
<span class=k>float</span> <span class=n>NdotL</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=n>dot</span><span class=p>(</span><span class=n>normalDirection</span><span class=p>,</span><span class=n>lightDirection</span><span class=p>)</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>+</span> <span class=mf>0.5</span><span class=p>);</span>
<span class=k>float</span> <span class=n>HalfLambertDiffuse</span> <span class=o>=</span> <span class=n>NdotL</span> <span class=o>*</span> <span class=n>SurfaceColor</span><span class=p>;</span>
<span class=n>float3</span> <span class=n>finalColor</span> <span class=o>=</span> <span class=n>HalfLambertDiffuse</span> <span class=o>*</span> <span class=n>LightColor</span><span class=p>;</span>
</code></pre></div><h2 id=phong-lighting>Phong Lighting</h2><p>é«˜å…‰è®¡ç®—éƒ¨åˆ†ï¼ŒåŸºæœ¬è®¡ç®—å…¬å¼ï¼š</p><blockquote><p>Cspecular = (Clight * M specular)Max(0, V * r)</p></blockquote><p>éœ€è¦å››ä¸ªå‚æ•°å‚ä¸è®¡ç®—ï¼Œå…¥å°„å…‰çš„é¢œè‰²å’Œå¼ºåº¦ Clightï¼Œæè´¨çš„é«˜å…‰åå°„ç³»æ•° Mspecularï¼Œè§†çº¿æ–¹å‘ v ä»¥åŠåå°„æ–¹å‘ rã€‚</p><div class=highlight><pre class=chroma><code class=language-glsl data-lang=glsl><span class=c1>// è§†çº¿æ–¹å‘ï¼Œæ‘„åƒæœºåæ ‡ - é¡¶ç‚¹åæ ‡å¾—åˆ°è§†çº¿æ–¹å‘ï¼Œå‘é‡ä»é¡¶ç‚¹æŒ‡å‘æ‘„åƒæœºï¼Œå°±æ˜¯è§†çº¿æ–¹å‘ </span>
<span class=n>float3</span> <span class=n>viewDirection</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>_WorldSpaceCameraPos</span><span class=p>.</span><span class=n>xyz</span> <span class=o>-</span> <span class=n>i</span><span class=p>.</span><span class=n>posWorld</span><span class=p>.</span><span class=n>xyz</span><span class=p>);</span>
<span class=c1>// å…‰çº¿åå°„æ–¹å‘ï¼Œæœ‰å…‰æºæ–¹å‘å’Œé¡¶ç‚¹çš„æ³•çº¿æ–¹å‘è®¡ç®—å¾—åˆ°</span>
<span class=n>float3</span> <span class=n>lightReflectDirection</span> <span class=o>=</span> <span class=n>reflect</span><span class=p>(</span> <span class=o>-</span><span class=n>lightDirection</span><span class=p>,</span> <span class=n>normalDirection</span> <span class=p>);</span>
<span class=c1>// Lambert å…‰ç…§æ¨¡å‹</span>
<span class=k>float</span> <span class=n>NdotL</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mo>0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span> <span class=n>normalDirection</span><span class=p>,</span> <span class=n>lightDirection</span> <span class=p>));</span>
<span class=k>float</span> <span class=n>RdotV</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mo>0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span> <span class=n>lightReflectDirection</span><span class=p>,</span> <span class=n>viewDirection</span> <span class=p>));</span>
<span class=c1>// è®¡ç®—å…·ä½“çš„é«˜å…‰ï¼Œæ˜¯ä¸€ä¸ªæŒ‡æ•°å‡½æ•°ï¼Œå†ä¹˜ä»¥å…‰ç…§å¼ºåº¦ã€é«˜å…‰é¢œè‰²</span>
<span class=n>float3</span> <span class=n>specularity</span> <span class=o>=</span> <span class=n>pow</span><span class=p>(</span><span class=n>RdotV</span><span class=p>,</span> <span class=n>_SpecularGloss</span><span class=o>/</span><span class=mi>4</span><span class=p>)</span> <span class=o>*</span><span class=n>_SpecularPower</span> <span class=o>*</span><span class=n>_SpecularColor</span><span class=p>.</span><span class=n>rgb</span> <span class=p>;</span>

<span class=n>float3</span> <span class=n>lightingModel</span> <span class=o>=</span> <span class=n>NdotL</span> <span class=o>*</span> <span class=n>diffuseColor</span> <span class=o>+</span> <span class=n>specularity</span><span class=p>;</span>
</code></pre></div><h2 id=blinn-phong>Blinn-Phong</h2><p>é«˜å…‰è®¡ç®—éƒ¨åˆ†ï¼ŒåŸºæœ¬å…¬å¼ï¼š</p><blockquote><p>Cspecular = (Clight * M specular)Max(0, n * h)</p></blockquote><p>ä¸åŒäº <code>Phong</code> æ¨¡å‹ï¼Œè¿™é‡Œä¸ä½¿ç”¨è§†çº¿æ–¹å‘ v å’Œåå°„æ–¹å‘ rï¼Œå–è€Œä»£ä¹‹çš„æ˜¯å¼•å…¥æ–°çš„çŸ¢é‡ hï¼Œé€šè¿‡è§†è§’æ–¹å‘ v å’Œå…‰ç…§æ–¹å‘ i ç›¸åŠ å½’ä¸€åŒ–å¤„ç†åå¾—åˆ°ã€‚</p><div class=highlight><pre class=chroma><code class=language-glsl data-lang=glsl><span class=c1>// è§†çº¿æ–¹å‘ï¼Œæ‘„åƒæœºåæ ‡ - é¡¶ç‚¹åæ ‡å¾—åˆ°è§†çº¿æ–¹å‘ï¼Œå‘é‡ä»é¡¶ç‚¹æŒ‡å‘æ‘„åƒæœºï¼Œå°±æ˜¯è§†çº¿æ–¹å‘ </span>
<span class=n>float3</span> <span class=n>viewDirection</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>_WorldSpaceCameraPos</span><span class=p>.</span><span class=n>xyz</span> <span class=o>-</span> <span class=n>i</span><span class=p>.</span><span class=n>posWorld</span><span class=p>.</span><span class=n>xyz</span><span class=p>);</span>
<span class=c1>// åŠè§’æ–¹å‘ï¼Œæ ¹æ®ç»éªŒå–å¾—çš„æ¨¡å‹ï¼Œè®©è§†çº¿æ–¹å‘+å…‰æºæ–¹å‘ä½œä¸ºå…‰åå°„çš„æ–¹å‘</span>
<span class=n>float3</span> <span class=n>halfDirection</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>viewDirection</span><span class=o>+</span><span class=n>lightDirection</span><span class=p>);</span> 
<span class=k>float</span> <span class=n>NdotL</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mo>0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span> <span class=n>normalDirection</span><span class=p>,</span> <span class=n>lightDirection</span> <span class=p>));</span>
<span class=k>float</span> <span class=n>NdotV</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mo>0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span> <span class=n>normalDirection</span><span class=p>,</span> <span class=n>halfDirection</span> <span class=p>));</span>
<span class=c1>// è®¡ç®—å…·ä½“çš„é«˜å…‰ï¼Œæ˜¯ä¸€ä¸ªæŒ‡æ•°å‡½æ•°ï¼Œå†ä¹˜ä»¥å…‰ç…§å¼ºåº¦ã€é«˜å…‰é¢œè‰²</span>
<span class=n>float3</span> <span class=n>specularity</span> <span class=o>=</span> <span class=n>pow</span><span class=p>(</span><span class=n>NdotV</span> <span class=p>,</span><span class=n>_SpecularGloss</span><span class=p>)</span><span class=o>*</span><span class=n>_SpecularPower</span>
 <span class=o>*</span><span class=n>_SpecularColor</span><span class=p>.</span><span class=n>rgb</span> <span class=p>;</span>

<span class=n>float3</span> <span class=n>lightingModel</span> <span class=o>=</span> <span class=n>NdotL</span> <span class=o>*</span> <span class=n>diffuseColor</span> <span class=o>+</span> <span class=n>specularity</span><span class=p>;</span>
</code></pre></div><h2 id=æ€»ç»“>æ€»ç»“</h2><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¤§é‡ä½¿ç”¨ <code>Half Lambert</code> å’Œ <code>Blinn-Phong</code> å…‰ç…§æ¨¡å‹ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªæ¨¡å‹éƒ½æ˜¯ <strong>ç»éªŒ</strong> æ¨¡å‹ï¼Œæˆ‘ä»¬ä»ç‰©ç†çš„è§’åº¦çœ‹ï¼Œè¿™ä¸¤ä¸ªæ¨¡å‹éƒ½æ˜¯ä¸æ­£ç¡®çš„ï¼Œä½†æ˜¯ï¼Œåœ¨å®é™…çš„æ¸²æŸ“ä¸­ï¼Œè¿™ä¸¤ä¸ªæ¨¡å‹çš„ç»“æœæ›´è®©äººæ»¡æ„ã€‚æœ€åç»™å‡ºé€‚ç”¨çš„ä»£ç ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è‡ªè¡Œæ³¨é‡Šæ‰å…³äºå…‰ç…§éƒ¨åˆ†è®¡ç®—çš„ä»£ç æ¥è§‚å¯Ÿä¸åŒå…‰ç…§æ¨¡å‹ä¹‹é—´çš„åŒºåˆ«</p><p><figure style=flex-grow:177;flex-basis:425px><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%AE%80%E5%8D%95%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/lightingmodel.png data-size=1547x872><img src=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%AE%80%E5%8D%95%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/lightingmodel.png srcset="/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%AE%80%E5%8D%95%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/lightingmodel_huf926d0fb8ea00f04d34bca55eaa16dd7_262933_480x0_resize_box_2.png 480w, /p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%AE%80%E5%8D%95%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/lightingmodel_huf926d0fb8ea00f04d34bca55eaa16dd7_262933_1024x0_resize_box_2.png 1024w" width=1547 height=872 loading=lazy alt=å››ç§ä¸åŒå…‰ç…§æ¨¡å‹çš„ç»“æœ></a><figcaption>å››ç§ä¸åŒå…‰ç…§æ¨¡å‹çš„ç»“æœ</figcaption></figure></p><div class=highlight><pre class=chroma><code class=language-glsl data-lang=glsl><span class=n>Shader</span> <span class=err>&#34;</span><span class=n>URP</span><span class=o>/</span><span class=n>HalfLambertBlinnPhong</span><span class=err>&#34;</span>
<span class=p>{</span>
    <span class=n>Properties</span>
    <span class=p>{</span>
        <span class=n>_Diffuse</span> <span class=p>(</span><span class=err>&#34;</span><span class=n>Diffuse</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>_Specular</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Specular</span><span class=err>&#34;</span><span class=p>,</span><span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>_Gloss</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Gloss</span><span class=err>&#34;</span><span class=p>,</span><span class=n>Range</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=mi>200</span><span class=p>))</span><span class=o>=</span><span class=mi>10</span>
    <span class=p>}</span>

    <span class=n>SubShader</span>
    <span class=p>{</span>
        <span class=n>Tags</span> <span class=p>{</span> <span class=err>&#34;</span><span class=n>RenderPipeline</span><span class=err>&#34;</span><span class=o>=</span><span class=err>&#34;</span><span class=n>UniversalRenderPipeline</span><span class=err>&#34;</span> <span class=err>&#34;</span><span class=n>RenderType</span><span class=err>&#34;</span><span class=o>=</span><span class=err>&#34;</span><span class=n>Opaque</span><span class=err>&#34;</span> <span class=p>}</span>

        <span class=n>Pass</span>
        <span class=p>{</span>
            <span class=n>Tags</span> <span class=p>{</span> <span class=err>&#34;</span><span class=n>LightMode</span><span class=err>&#34;</span><span class=o>=</span><span class=err>&#34;</span><span class=n>UniversalForward</span><span class=err>&#34;</span><span class=p>}</span>

            <span class=n>HLSLPROGRAM</span>
            <span class=c1>// UnityCG.cginc æ–‡ä»¶è¢«ä»£æ›¿ï¼Œä½¿ç”¨ HLSL æ–‡ä»¶ï¼Œè¿™é‡Œå¼•ç”¨æ–‡ä»¶</span>
            <span class=err>#</span><span class=n>include</span> <span class=err>&#34;</span><span class=n>Packages</span><span class=o>/</span><span class=n>com</span><span class=p>.</span><span class=n>unity</span><span class=p>.</span><span class=n>render</span><span class=o>-</span><span class=n>pipelines</span><span class=p>.</span><span class=n>universal</span><span class=o>/</span><span class=n>ShaderLibrary</span><span class=o>/</span><span class=n>Core</span><span class=p>.</span><span class=n>hlsl</span><span class=err>&#34;</span>
            <span class=err>#</span><span class=n>include</span> <span class=err>&#34;</span><span class=n>Packages</span><span class=o>/</span><span class=n>com</span><span class=p>.</span><span class=n>unity</span><span class=p>.</span><span class=n>render</span><span class=o>-</span><span class=n>pipelines</span><span class=p>.</span><span class=n>universal</span><span class=o>/</span><span class=n>ShaderLibrary</span><span class=o>/</span><span class=n>Lighting</span><span class=p>.</span><span class=n>hlsl</span><span class=err>&#34;</span>
            <span class=err>#</span><span class=n>include</span> <span class=err>&#34;</span><span class=n>Packages</span><span class=o>/</span><span class=n>com</span><span class=p>.</span><span class=n>unity</span><span class=p>.</span><span class=n>render</span><span class=o>-</span><span class=n>pipelines</span><span class=p>.</span><span class=n>core</span><span class=o>/</span><span class=n>ShaderLibrary</span><span class=o>/</span><span class=n>SpaceTransforms</span><span class=p>.</span><span class=n>hlsl</span><span class=err>&#34;</span>

            <span class=err>#</span><span class=n>pragma</span> <span class=n>vertex</span> <span class=n>vert</span>
            <span class=err>#</span><span class=n>pragma</span> <span class=n>fragment</span> <span class=n>frag</span>

            <span class=n>CBUFFER_START</span><span class=p>(</span><span class=n>UnityPerMaterial</span><span class=p>)</span> <span class=c1>// å…¼å®¹ SRP æ‰¹å¤„ç†ï¼Œå°†æ‰€æœ‰æè´¨å±æ€§å£°æ˜åœ¨ä¸€ä¸ª UnityPerMaterial çš„ CBUFFER å—ä¸­   </span>
            <span class=n>float4</span> <span class=n>_Diffuse</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_Specular</span><span class=p>;</span>
            <span class=k>float</span> <span class=n>_Gloss</span><span class=p>;</span>
            <span class=n>CBUFFER_END</span>

            <span class=k>struct</span> <span class=n>a2v</span>
            <span class=p>{</span>
                <span class=n>float4</span> <span class=n>vertex</span> <span class=o>:</span> <span class=n>POSITION</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>normal</span> <span class=o>:</span> <span class=n>NORMAL</span><span class=p>;</span>
                <span class=n>float2</span> <span class=n>lightmapUV</span> <span class=o>:</span> <span class=n>TEXCOORD1</span><span class=p>;</span>
            <span class=p>};</span>

            <span class=k>struct</span> <span class=n>v2f</span>
            <span class=p>{</span>
                <span class=n>float4</span> <span class=n>pos</span> <span class=o>:</span> <span class=n>SV_POSITION</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>worldNormal</span> <span class=o>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>worldPos</span> <span class=o>:</span> <span class=n>TEXCOORD1</span><span class=p>;</span> 
            <span class=p>};</span>
            <span class=n>v2f</span> <span class=n>vert</span><span class=p>(</span><span class=n>a2v</span> <span class=n>v</span><span class=p>)</span>
            <span class=p>{</span>
                <span class=n>v2f</span> <span class=n>o</span><span class=p>;</span>
                <span class=n>ZERO_INITIALIZE</span><span class=p>(</span><span class=n>v2f</span><span class=p>,</span> <span class=n>o</span><span class=p>);</span>   <span class=c1>// åˆå§‹åŒ–å˜é‡</span>
                <span class=n>o</span><span class=p>.</span><span class=n>pos</span><span class=o>=</span><span class=n>TransformObjectToHClip</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>.</span><span class=n>xyz</span><span class=p>);</span>           <span class=c1>// é¡¶ç‚¹åæ ‡ä»æ¨¡å‹ç©ºé—´è½¬åˆ°è£å‰ªç©ºé—´</span>
                <span class=n>o</span><span class=p>.</span><span class=n>worldNormal</span> <span class=o>=</span> <span class=n>TransformObjectToWorldDir</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>normal</span><span class=p>);</span>  <span class=c1>// æ³•çº¿ä»æ¨¡å‹ç©ºé—´è½¬åˆ°ä¸–ç•Œç©ºé—´</span>
                <span class=n>o</span><span class=p>.</span><span class=n>worldPos</span> <span class=o>=</span> <span class=n>TransformObjectToWorldDir</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>.</span><span class=n>xyz</span><span class=p>);</span> <span class=c1>// é¡¶ç‚¹ä»å¯¹è±¡ç©ºé—´è½¬åˆ°ä¸–ç•Œç©ºé—´</span>
                <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=n>half4</span> <span class=n>frag</span><span class=p>(</span><span class=n>v2f</span> <span class=n>i</span><span class=p>)</span><span class=o>:</span><span class=n>SV_Target</span>
            <span class=p>{</span>
                <span class=n>Light</span> <span class=n>mainLight</span> <span class=o>=</span> <span class=n>GetMainLight</span><span class=p>();</span>  <span class=c1>// è·å–ä¸»å…‰æº</span>
                <span class=n>half3</span> <span class=n>worldNormal</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>worldNormal</span><span class=p>);</span> <span class=c1>// é¡¶ç‚¹æ³•çº¿æ–¹å‘å½’ä¸€åŒ–</span>
                <span class=n>half3</span> <span class=n>worldLightDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>TransformObjectToWorldDir</span><span class=p>(</span><span class=n>mainLight</span><span class=p>.</span><span class=n>direction</span><span class=p>));</span> <span class=c1>// ä¸»å…‰æºæ–¹å‘å½’ä¸€åŒ–</span>
                <span class=n>half3</span> <span class=n>viewDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>_WorldSpaceCameraPos</span><span class=p>.</span><span class=n>xyz</span> <span class=o>-</span> <span class=n>i</span><span class=p>.</span><span class=n>worldPos</span><span class=p>);</span> <span class=c1>// è®¡ç®—è§†è§’æ–¹å‘å¹¶ä¸”å½’ä¸€åŒ–</span>
                <span class=n>half3</span> <span class=n>lightReflectDir</span> <span class=o>=</span> <span class=n>reflect</span><span class=p>(</span> <span class=o>-</span><span class=n>worldLightDir</span><span class=p>,</span> <span class=n>worldNormal</span> <span class=p>);</span>   <span class=c1>// è®¡ç®— phong æ¨¡å‹ä¸­é«˜å…‰éƒ¨åˆ†</span>
                <span class=n>half3</span> <span class=n>halfDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>worldLightDir</span> <span class=o>+</span> <span class=n>viewDir</span><span class=p>);</span> <span class=c1>// è®¡ç®—åŠè§’æ–¹å‘ä¸”å½’ä¸€åŒ–</span>

                <span class=n>half3</span> <span class=n>NdotL</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>worldNormal</span><span class=p>,</span> <span class=n>worldLightDir</span><span class=p>));</span>   <span class=c1>// Lambert</span>
                <span class=n>half3</span> <span class=n>RdotV</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>worldNormal</span><span class=p>,</span> <span class=n>lightReflectDir</span><span class=p>));</span> <span class=c1>// Phong</span>
                <span class=n>half3</span> <span class=n>NdotV</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>worldNormal</span><span class=p>,</span> <span class=n>halfDir</span><span class=p>));</span>         <span class=c1>// Blinn-Phong</span>

                <span class=c1>/// lambert + Phong</span>
                <span class=c1>//half3 diffuse = mainLight.color.rgb * _Diffuse.rgb * NdotL;</span>
                <span class=c1>//half3 specular = mainLight.color.rgb * _Specular.rgb * pow(RdotV, _Gloss);</span>

                <span class=c1>/// Lambert + Blinn-Phong</span>
                <span class=c1>//half3 diffuse = mainLight.color.rgb * _Diffuse.rgb * NdotL;</span>
                <span class=c1>//half3 specular = mainLight.color.rgb * _Specular.rgb * pow(NdotV, _Gloss);</span>

                <span class=c1>/// Half Lambert + Phong</span>
                <span class=c1>//half3 diffuse = mainLight.color.rgb * _Diffuse.rgb * pow(NdotL * 0.5 + 0.5, 2.0);</span>
                <span class=c1>//half3 specular = mainLight.color.rgb * _Specular.rgb * pow(RdotV, _Gloss);</span>

                <span class=c1>/// Half Lambert + Blinn-Phong</span>
                <span class=n>half3</span> <span class=n>diffuse</span> <span class=o>=</span> <span class=n>mainLight</span><span class=p>.</span><span class=n>color</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>_Diffuse</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>pow</span><span class=p>(</span><span class=n>NdotL</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>+</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>);</span>
                <span class=n>half3</span> <span class=n>specular</span> <span class=o>=</span> <span class=n>mainLight</span><span class=p>.</span><span class=n>color</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>_Specular</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>pow</span><span class=p>(</span><span class=n>NdotV</span><span class=p>,</span> <span class=n>_Gloss</span><span class=p>);</span>
                
                <span class=c1>// è®¡ç®—ç¯å¢ƒå…‰</span>
                <span class=n>half3</span> <span class=n>ambient</span> <span class=o>=</span> <span class=n>_GlossyEnvironmentColor</span><span class=p>;</span>

                <span class=n>half4</span> <span class=n>col</span><span class=o>=</span> <span class=n>half4</span><span class=p>(</span><span class=n>ambient</span> <span class=o>+</span> <span class=n>diffuse</span> <span class=o>+</span> <span class=n>specular</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
                <span class=k>return</span> <span class=n>col</span><span class=p>;</span>
            <span class=p>}</span>
            <span class=n>ENDHLSL</span>
        <span class=p>}</span>
    <span class=p>}</span>
    <span class=n>FallBack</span> <span class=err>&#34;</span><span class=n>Packages</span><span class=o>/</span><span class=n>com</span><span class=p>.</span><span class=n>unity</span><span class=p>.</span><span class=n>render</span><span class=o>-</span><span class=n>pipelines</span><span class=p>.</span><span class=n>universal</span><span class=o>/</span><span class=n>FallbackError</span><span class=err>&#34;</span>
<span class=p>}</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-glsl data-lang=glsl><span class=n>Shader</span> <span class=err>&#34;</span><span class=n>SRP</span><span class=o>/</span><span class=n>HalfLambertBlinnPhong</span><span class=err>&#34;</span>
<span class=p>{</span>
    <span class=n>Properties</span>
    <span class=p>{</span>
        <span class=n>_Diffuse</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Diffuse</span> <span class=n>Color</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>_SpcularColor</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Spcular</span> <span class=n>Color</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Color</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>_SpcularStrength</span><span class=p>(</span><span class=err>&#34;</span><span class=n>Spcular</span> <span class=n>Strenght</span><span class=err>&#34;</span><span class=p>,</span> <span class=n>Range</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=mi>100</span><span class=p>))</span> <span class=o>=</span> <span class=mi>10</span>
    <span class=p>}</span>
    <span class=n>SubShader</span>
    <span class=p>{</span>
        <span class=n>Tags</span> <span class=p>{</span> <span class=err>&#34;</span><span class=n>RenderType</span><span class=err>&#34;</span><span class=o>=</span><span class=err>&#34;</span><span class=n>Opaque</span><span class=err>&#34;</span> <span class=p>}</span>
        <span class=n>LOD</span> <span class=mi>100</span>

        <span class=n>Pass</span>
        <span class=p>{</span>
            <span class=n>CGPROGRAM</span>
            <span class=err>#</span><span class=n>pragma</span> <span class=n>vertex</span> <span class=n>vert</span>
            <span class=err>#</span><span class=n>pragma</span> <span class=n>fragment</span> <span class=n>frag</span>

            <span class=err>#</span><span class=n>include</span> <span class=err>&#34;</span><span class=n>UnityCG</span><span class=p>.</span><span class=n>cginc</span><span class=err>&#34;</span>
            <span class=err>#</span><span class=n>include</span> <span class=err>&#34;</span><span class=n>Lighting</span><span class=p>.</span><span class=n>cginc</span><span class=err>&#34;</span>

            <span class=n>float4</span> <span class=n>_Diffuse</span><span class=p>;</span>
            <span class=n>float4</span> <span class=n>_SpcularColor</span><span class=p>;</span>
            <span class=k>float</span> <span class=n>_SpcularStrength</span><span class=p>;</span>

            <span class=k>struct</span> <span class=n>appdata</span>
            <span class=p>{</span>
                <span class=n>float4</span> <span class=n>vertex</span> <span class=o>:</span> <span class=n>POSITION</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>normal</span> <span class=o>:</span> <span class=n>NORMAL</span><span class=p>;</span>
            <span class=p>};</span>

            <span class=k>struct</span> <span class=n>v2f</span>
            <span class=p>{</span>
                <span class=n>float4</span> <span class=n>pos</span> <span class=o>:</span> <span class=n>SV_POSITION</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>worldNormal</span> <span class=o>:</span> <span class=n>NORMAL</span><span class=p>;</span>
                <span class=n>float3</span> <span class=n>worldPos</span> <span class=o>:</span> <span class=n>TEXCOORD0</span><span class=p>;</span>
            <span class=p>};</span>

            <span class=n>v2f</span> <span class=n>vert</span> <span class=p>(</span><span class=n>appdata</span> <span class=n>v</span><span class=p>)</span>
            <span class=p>{</span>
                <span class=n>v2f</span> <span class=n>o</span><span class=p>;</span>
                <span class=n>o</span><span class=p>.</span><span class=n>pos</span> <span class=o>=</span> <span class=n>UnityObjectToClipPos</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span>  <span class=c1>// é¡¶ç‚¹åæ ‡ä»æ¨¡å‹ç©ºé—´è½¬åˆ°è£å‰ªç©ºé—´</span>
                <span class=n>o</span><span class=p>.</span><span class=n>worldNormal</span> <span class=o>=</span> <span class=n>UnityObjectToWorldDir</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>normal</span><span class=p>);</span> <span class=c1>// å°†æ³•çº¿ä»æ¨¡å‹ç©ºé—´è½¬åˆ°ä¸–ç•Œç©ºé—´</span>
                <span class=n>o</span><span class=p>.</span><span class=n>worldPos</span> <span class=o>=</span> <span class=n>UnityObjectToWorldDir</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>vertex</span><span class=p>);</span>    <span class=c1>// å°†é¡¶ç‚¹ä»æ¨¡å‹ç©ºé—´è½¬åˆ°ä¸–ç•Œç©ºé—´</span>
                <span class=k>return</span> <span class=n>o</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=n>fixed4</span> <span class=n>frag</span> <span class=p>(</span><span class=n>v2f</span> <span class=n>i</span><span class=p>)</span> <span class=o>:</span> <span class=n>SV_Target</span>
            <span class=p>{</span>
                <span class=n>half3</span> <span class=n>ambient</span> <span class=o>=</span> <span class=n>UNITY_LIGHTMODEL_AMBIENT</span><span class=p>.</span><span class=n>xyz</span><span class=p>;</span> <span class=c1>// è·å–ç¯å¢ƒå…‰</span>
                <span class=n>half3</span> <span class=n>worldLightDir</span><span class=o>=</span><span class=n>normalize</span><span class=p>(</span><span class=n>_WorldSpaceLightPos0</span><span class=p>.</span><span class=n>xyz</span><span class=p>);</span> <span class=c1>// ä¸»å…‰æºçš„æ–¹å‘</span>
                <span class=n>half3</span> <span class=n>worldNormal</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>worldNormal</span><span class=p>);</span>            <span class=c1>// æ³•çº¿æ–¹å‘</span>
                <span class=n>half3</span> <span class=n>viewDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>_WorldSpaceCameraPos</span><span class=p>.</span><span class=n>xyz</span> <span class=o>-</span> <span class=n>i</span><span class=p>.</span><span class=n>worldPos</span><span class=p>);</span> <span class=c1>// è§†è§’æ–¹å‘</span>
                <span class=n>half3</span> <span class=n>lightReflectDir</span> <span class=o>=</span> <span class=n>reflect</span><span class=p>(</span><span class=o>-</span><span class=n>worldLightDir</span><span class=p>,</span> <span class=n>worldNormal</span><span class=p>);</span>     <span class=c1>// ä¸»å…‰æºå…‰çº¿åå°„æ–¹å‘</span>
                <span class=n>half3</span> <span class=n>halfDir</span> <span class=o>=</span> <span class=n>normalize</span><span class=p>(</span><span class=n>viewDir</span> <span class=o>+</span> <span class=n>worldLightDir</span><span class=p>);</span>

                <span class=n>half3</span> <span class=n>NdotL</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>worldNormal</span><span class=p>,</span> <span class=n>worldLightDir</span><span class=p>));</span>   <span class=c1>// lambert</span>
                <span class=n>half3</span> <span class=n>RdotV</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>worldNormal</span><span class=p>,</span> <span class=n>lightReflectDir</span><span class=p>));</span> <span class=c1>// phong</span>
                <span class=n>half3</span> <span class=n>NdotV</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>dot</span><span class=p>(</span><span class=n>worldNormal</span><span class=p>,</span> <span class=n>halfDir</span><span class=p>));</span>         <span class=c1>// blinn phong</span>

                <span class=c1>// lambert + phong</span>
                <span class=c1>//half3 diffuse = _LightColor0.rgb * _Diffuse * NdotL;</span>
                <span class=c1>//half3 specular = _LightColor0.rgb * _SpcularColor.rgb * pow(RdotV, _SpcularStrength);</span>
                <span class=c1>// Lambert + blinn phong</span>
                <span class=c1>//half3 diffuse = _LightColor0.rgb * _Diffuse * NdotL;</span>
                <span class=c1>//half3 specular = _LightColor0.rgb * _SpcularColor.rgb * pow(NdotV, _SpcularStrength);</span>
                <span class=c1>// half lambert + phong</span>
                <span class=c1>//half3 diffuse = _LightColor0.rgb * _Diffuse * pow(NdotL * 0.5 + 0.5, 2.0);</span>
                <span class=c1>//half3 specular = _LightColor0.rgb * _SpcularColor.rgb * pow(RdotV, _SpcularStrength);</span>
                <span class=c1>// half lambert + blinn phong</span>
                <span class=n>half3</span> <span class=n>diffuse</span> <span class=o>=</span> <span class=n>_LightColor0</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>_Diffuse</span> <span class=o>*</span> <span class=n>pow</span><span class=p>(</span><span class=n>NdotL</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>+</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>);</span>
                <span class=n>half3</span> <span class=n>specular</span> <span class=o>=</span> <span class=n>_LightColor0</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>_SpcularColor</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>pow</span><span class=p>(</span><span class=n>NdotV</span><span class=p>,</span> <span class=n>_SpcularStrength</span><span class=p>);</span>

                <span class=k>return</span> <span class=n>half4</span><span class=p>(</span><span class=n>diffuse</span> <span class=o>+</span> <span class=n>specular</span> <span class=o>+</span> <span class=n>ambient</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
            <span class=p>}</span>
            <span class=n>ENDCG</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>ç›¸å…³é“¾æ¥ <a class=link href=https://www.jordanstevenstechart.com/lighting-models target=_blank rel=noopener>Lighting Models In Unity - Jordan Stevens</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81/>Shaderå…¥é—¨ç²¾è¦</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-contents><div class="flex article-list--tile"><article class=has-image><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%94%BB%E9%9D%A2%E5%8A%A8%E8%B5%B7%E6%9D%A5/><div class=article-image><img src=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E7%94%BB%E9%9D%A2%E5%8A%A8%E8%B5%B7%E6%9D%A5/topimg.da92c8fea658637ee841a18e087c1f1f_huc02f10a1e3cad6ccefc74d8d773bec3e_154933_250x150_fill_box_smart1_2.png width=250 height=150 loading=lazy data-key data-hash="md5-2pLI/qZYY37oQaGOCHwfHw=="></div><div class=article-details><h2 class=article-title>Shaderå…¥é—¨ç²¾è¦-ç”»é¢åŠ¨èµ·æ¥</h2></div></a></article><article class=has-image><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E9%AB%98%E7%BA%A7%E7%BA%B9%E7%90%86/><div class=article-image><img src=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E9%AB%98%E7%BA%A7%E7%BA%B9%E7%90%86/topimg.67a55883ca0dddee7a38aee92b8bd0c8_hufdc4047d1f13243dc00ee98ca40c3721_1787439_250x150_fill_box_smart1_2.png width=250 height=150 loading=lazy data-key data-hash="md5-Z6VYg8oN3e56OK7pK4vQyA=="></div><div class=article-details><h2 class=article-title>Shaderå…¥é—¨ç²¾è¦-é«˜çº§çº¹ç†</h2></div></a></article><article class=has-image><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E6%9B%B4%E5%8A%A0%E5%A4%8D%E6%9D%82%E7%9A%84%E5%85%89%E7%85%A7/><div class=article-image><img src=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E6%9B%B4%E5%8A%A0%E5%A4%8D%E6%9D%82%E7%9A%84%E5%85%89%E7%85%A7/topimg.6c5c6801e5665142f1afc74f7eccabb9_hud5b4711730563b8f6fe841cfaa71f45d_221051_250x150_fill_box_smart1_2.png width=250 height=150 loading=lazy data-key data-hash="md5-bFxoAeVmUULxr8dPfsyruQ=="></div><div class=article-details><h2 class=article-title>Shaderå…¥é—¨ç²¾è¦-æ›´åŠ å¤æ‚çš„å…‰ç…§</h2></div></a></article><article class=has-image><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E9%80%8F%E6%98%8E%E6%95%88%E6%9E%9C/><div class=article-image><img src=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E9%80%8F%E6%98%8E%E6%95%88%E6%9E%9C/topimg.d65ee7581cfef7096ee4aec08398a608_hucec924f8a8d5e17115b60defab86f43b_300097_250x150_fill_box_smart1_2.png width=250 height=150 loading=lazy data-key data-hash="md5-1l7nWBz+9wlu5K7Ag5imCA=="></div><div class=article-details><h2 class=article-title>Shaderå…¥é—¨ç²¾è¦-é€æ˜æ•ˆæœ</h2></div></a></article><article class=has-image><a href=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/><div class=article-image><img src=/p/shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81-%E5%9F%BA%E7%A1%80%E7%BA%B9%E7%90%86/topimg.b1f07d907209b24d4812f315eb6ff2fa_hub743dc7ee0e867207b7b55e10230ffbf_426847_250x150_fill_box_smart1_2.png width=250 height=150 loading=lazy data-key data-hash="md5-sfB9kHIJsk1IEvMV62/y+g=="></div><div class=article-details><h2 class=article-title>Shaderå…¥é—¨ç²¾è¦-åŸºç¡€çº¹ç†</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo issue-term=pathname crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>function setUtterancesTheme(b){let a=document.querySelector('.utterances iframe');a&&a.contentWindow.postMessage({type:'set-theme',theme:`github-${b}`},'https://utteranc.es')}addEventListener('message',a=>{if(a.origin!=='https://utteranc.es')return;setUtterancesTheme(document.body.dataset.scheme)}),window.addEventListener('onColorSchemeChange',a=>{setUtterancesTheme(a.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2021 YanTree</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=2.3.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script></body></html>